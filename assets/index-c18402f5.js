import{q as B,a4 as w,L as T,s as d,t as m,a as A,o as s,f as n,e,b as o,d as r,z as i,ag as N,a1 as _,E as b,H as u,G as f,c as C}from"./index-35d4c811.js";import{_ as M}from"./Loading-891177bd.js";import{h as E}from"./moment-a9aaa855.js";import{a as G,V as I}from"./VRow-d67d386c.js";import{V as P}from"./VCardText-20e2d0ff.js";import{V as z}from"./VDataTable-6d3f6f6a.js";import{V as g}from"./VTooltip-5c041b29.js";import{V as U}from"./VCard-06d56730.js";import"./VAvatar-7759ad5c.js";import"./VImg-9b04c05e.js";import"./VSelect-bf5a5be9.js";import"./VTextField-9bfa6dc1.js";/* empty css                   */import"./VCounter-dcd2da2a.js";import"./VField-4ee07b6e.js";import"./focus-47cc4c1d.js";import"./easing-9f15041e.js";import"./VInput-ff4d0189.js";import"./form-ff0dacbf.js";import"./forwardRefs-8348545e.js";import"./VList-56d7996c.js";import"./ssrBoot-c2946fb8.js";import"./VDivider-4423ace3.js";import"./dialog-transition-5411c7b8.js";import"./VMenu-d6c3699e.js";import"./VOverlay-ec7a9eab.js";import"./lazy-4836c696.js";import"./scopeId-d5f41359.js";import"./VCheckboxBtn-d7c7ca98.js";import"./VSelectionControl-4d8986cc.js";import"./VChip-5a7d2631.js";import"./VTable-41351eee.js";import"./filter-85676bf0.js";const $=r("div",null,[r("h2",null,"Subscription Cancellation Requests")],-1),j={class:"text-xs"},H={class:"text-xs"},J={key:0,style:{padding:"2px 10px"},class:"rounded bg-primary mr-1"},L={key:1,style:{padding:"2px 10px"},class:"rounded bg-success mr-1"},O={key:2,style:{padding:"2px 10px","background-color":"#c72c2c",color:"#fff"},class:"rounded bg-danger mr-1"},Y={class:"text-xs"},Bt={__name:"index",setup(F){const a=B(),V=w.useToast(),y=T();d(()=>document.title="Client - Subscription Cancellation Requests"),d(()=>a.dispatch("GetSubscriptionCancellations"));const v=m(()=>a.state.subscriptionCancellations.cancellations),q=m(()=>a.state.subscriptionCancellations.loading),R=m(()=>a.state.auth.user),p=JSON.parse(R.value.permissions);d(()=>{var c;(c=p.CancellationRequests)!=null&&c.includes("ReadCancellationRequests")||(alert("You don't have permission to access this resource..."),y.go(-1))});const D=[{title:"Title",key:"subscription.title"},{title:"Description",key:"subscription.description"},{title:"Status",key:"subscription.status"},{title:"Date",key:"subscription.date"},{title:"Action",key:"subscription.action",sortable:!1}],S=async c=>{if(confirm("Are you sure to delete ?"))try{const l=await a.dispatch("DeleteSubscriptionCancellations",c);l.status===200&&(V.error(l.message),a.dispatch("GetSubscriptionCancellations"))}catch(l){console.log(l)}};return(c,l)=>{const h=A("IconBtn");return s(),n(I,null,{default:e(()=>[q.value?(s(),n(M,{key:0})):(s(),n(G,{key:1,cols:"12"},{default:e(()=>[o(U,null,{default:e(()=>[o(P,{style:{display:"flex","flex-direction":"row","align-items":"center","justify-content":"space-between","border-bottom":"thin solid rgba(var(--v-border-color), var(--v-border-opacity))"}},{default:e(()=>{var t;return[$,r("div",null,[(t=i(p).CancellationRequests)!=null&&t.includes("CreateCancellationRequests")?(s(),n(N,{key:0,to:"/client/subscription/cancellation/requests/create",rounded:"pill",color:"primary",size:"small",class:"ml-5"},{default:e(()=>[o(_,{start:"",icon:"tabler-plus"}),b("Create ")]),_:1})):u("",!0)])]}),_:1}),o(i(z),{headers:D,items:v.value,"items-per-page":5,class:"text-no-wrap mb-4"},{"item.subscription.title":e(({item:t})=>[r("span",j,f(t==null?void 0:t.title),1)]),"item.subscription.description":e(({item:t})=>[r("span",H,f(t==null?void 0:t.description),1)]),"item.subscription.status":e(({item:t})=>[(t==null?void 0:t.status)==="Pending"?(s(),C("span",J,"Pending")):(t==null?void 0:t.status)==="Approved"?(s(),C("span",L,"Approved")):(t==null?void 0:t.status)==="Cancelled"?(s(),C("span",O,"Cancelled")):u("",!0)]),"item.subscription.date":e(({item:t})=>[r("span",Y,f(i(E)(t==null?void 0:t.created_at).format("DD MMM yyyy, hh:mm A")),1)]),"item.subscription.action":e(({item:t})=>{var k,x;return[(k=i(p).CancellationRequests)!=null&&k.includes("UpdateCancellationRequests")?(s(),n(h,{key:0,onClick:()=>i(y).push("/client/subscription/cancellation/requests/edit/"+t.id)},{default:e(()=>[o(g,{activator:"parent",location:"top"},{default:e(()=>[b("Update")]),_:1}),o(_,{icon:"tabler-edit"})]),_:2},1032,["onClick"])):u("",!0),(x=i(p).CancellationRequests)!=null&&x.includes("DeleteCancellationRequests")?(s(),n(h,{key:1,onClick:K=>S(t.id)},{default:e(()=>[o(g,{activator:"parent",location:"top"},{default:e(()=>[b("Delete")]),_:1}),o(_,{icon:"tabler-trash"})]),_:2},1032,["onClick"])):u("",!0)]}),_:1},8,["items"])]),_:1})]),_:1}))]),_:1})}}};export{Bt as default};
