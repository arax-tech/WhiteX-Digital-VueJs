import{h as B}from"./moment-a9aaa855.js";import{q as M,a4 as N,L as T,s as p,t as _,r as w,a as P,o as n,f as h,e as o,b as c,z as v,d as t,E as l,G as a,c as r,C as E,F as S,H as R,a1 as q}from"./index-35d4c811.js";import{_ as F}from"./Loading-891177bd.js";import{a as b,V as x}from"./VRow-d67d386c.js";import{V as G}from"./VCardText-20e2d0ff.js";import{V as L}from"./VDataTable-6d3f6f6a.js";import{V as U}from"./VTooltip-5c041b29.js";import{V as $}from"./VCard-06d56730.js";import"./VAvatar-7759ad5c.js";import"./VImg-9b04c05e.js";import"./VSelect-bf5a5be9.js";import"./VTextField-9bfa6dc1.js";/* empty css                   */import"./VCounter-dcd2da2a.js";import"./VField-4ee07b6e.js";import"./focus-47cc4c1d.js";import"./easing-9f15041e.js";import"./VInput-ff4d0189.js";import"./form-ff0dacbf.js";import"./forwardRefs-8348545e.js";import"./VList-56d7996c.js";import"./ssrBoot-c2946fb8.js";import"./VDivider-4423ace3.js";import"./dialog-transition-5411c7b8.js";import"./VMenu-d6c3699e.js";import"./VOverlay-ec7a9eab.js";import"./lazy-4836c696.js";import"./scopeId-d5f41359.js";import"./VCheckboxBtn-d7c7ca98.js";import"./VSelectionControl-4d8986cc.js";import"./VChip-5a7d2631.js";import"./VTable-41351eee.js";import"./filter-85676bf0.js";const z=t("h2",null,"Invoices",-1),A={class:"text-xs"},H=t("b",null,"Name : ",-1),J=t("br",null,null,-1),O=t("b",null,"Company : ",-1),Y=t("br",null,null,-1),j=t("b",null,"Email : ",-1),K=t("br",null,null,-1),Q=t("b",null,"Phone : ",-1),W=t("br",null,null,-1),X=t("br",null,null,-1),Z={key:0,style:{padding:"2px 10px"},class:"rounded bg-warning"},ss={key:1,style:{padding:"2px 10px"},class:"rounded bg-success"},os={key:2,style:{padding:"2px 10px","background-color":"#c72c2c",color:"#fff"},class:"rounded"},ts={class:"text-xs"},es={class:"text-xs"},Ls={__name:"index",setup(as){const d=M();N.useToast();const f=T();p(()=>document.title="Client - Invoices"),p(()=>d.dispatch("GetInvoices"));const k=_(()=>d.state.auth.user),V=JSON.parse(k.value.permissions);p(()=>{var u;(u=V.InvoiceManagement)!=null&&u.includes("ReadInvoiceManagement")||(alert("You don't have permission to access this resource..."),f.go(-1))});const g=_(()=>d.state.invoices.data),C=_(()=>d.state.invoices.loading);w("");const I=[{title:"Client",key:"invoice.client"},{title:"Items",key:"invoice.products"},{title:"Status",key:"invoice.status"},{title:"Issue Date",key:"invoice.issue_date"},{title:"Total",key:"invoice.total"},{title:"Action",key:"invoice.action"}];return(u,ns)=>{const D=P("IconBtn");return n(),h(x,null,{default:o(()=>[C.value?(n(),h(F,{key:0})):(n(),h(b,{key:1,cols:"12"},{default:o(()=>[c($,null,{default:o(()=>[c(G,{style:{"border-bottom":"thin solid rgba(var(--v-border-color), var(--v-border-opacity))"}},{default:o(()=>[c(x,null,{default:o(()=>[c(b,{cols:"12",md:"12"},{default:o(()=>[z]),_:1})]),_:1})]),_:1}),c(v(L),{headers:I,items:g.value,"items-per-page":5,class:"text-no-wrap mb-4"},{"item.invoice.client":o(({item:s})=>{var e,i,m,y;return[t("span",A,[H,l(" "+a((e=s==null?void 0:s.client)==null?void 0:e.name)+" ",1),J,O,l(" "+a((i=s==null?void 0:s.client)==null?void 0:i.company_name)+" ",1),Y,j,l(" "+a((m=s==null?void 0:s.client)==null?void 0:m.email)+" ",1),K,Q,l(" "+a((y=s==null?void 0:s.client)==null?void 0:y.phone)+" ",1),W])]}),"item.invoice.products":o(({item:s})=>[(n(!0),r(S,null,E(s==null?void 0:s.items,(e,i)=>(n(),r("span",{key:i,class:"text-xs"},[l(a(i+1)+" : "+a(e==null?void 0:e.name)+", "+a(e==null?void 0:e.qty)+"  -  "+a(e==null?void 0:e.price),1),X]))),128))]),"item.invoice.status":o(({item:s})=>[(s==null?void 0:s.status)==="Due"?(n(),r("span",Z,"Due")):(s==null?void 0:s.status)==="Paid"?(n(),r("span",ss,"Paid")):(s==null?void 0:s.status)==="UnPaid"?(n(),r("span",os,"Unpaid")):R("",!0)]),"item.invoice.issue_date":o(({item:s})=>[t("span",ts,a(s!=null&&s.issue_date?v(B)(s==null?void 0:s.issue_date).format("DD MMM yyyy"):"-"),1)]),"item.invoice.total":o(({item:s})=>[t("span",es,a(s==null?void 0:s.total),1)]),"item.invoice.action":o(({item:s})=>[c(D,{onClick:()=>v(f).push(`/invoice/print/${s==null?void 0:s.id}`)},{default:o(()=>[c(U,{activator:"parent",location:"top"},{default:o(()=>[l("View")]),_:1}),c(q,{icon:"tabler-eye"})]),_:2},1032,["onClick"])]),_:1},8,["items"])]),_:1})]),_:1}))]),_:1})}}};export{Ls as default};
