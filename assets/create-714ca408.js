import{r as d}from"./validators-dea6e3a5.js";import{q as $,L as A,a4 as R,s as b,t as g,r as k,o as m,f as c,e as a,b as t,d as f,ag as v,a1 as x,E as y,D as z,z as l,G as E}from"./index-c4e71550.js";import{_ as G}from"./AppTextarea-37ab21a0.js";import{_ as M}from"./AppSelect-0065786f.js";import{_ as P}from"./AppTextField-a8f30c8f.js";import{_ as j}from"./Loading-2eec0421.js";import{a as s,V as C}from"./VRow-3a397f81.js";import{V as F}from"./VCardText-6669d6f5.js";import{V as I}from"./VDivider-aef533a2.js";import{V as J}from"./VForm-617abc97.js";import{V as L}from"./VCard-71b3ac17.js";import"./helpers-61e4df1a.js";import"./focus-ba6d54b4.js";/* empty css                   */import"./VCounter-856e1893.js";import"./VImg-8451f417.js";import"./VField-0f4003e5.js";import"./easing-9f15041e.js";import"./VInput-6532c874.js";import"./form-d2acef44.js";import"./forwardRefs-8348545e.js";import"./VSelect-9628140b.js";import"./VTextField-47e6f93c.js";import"./VList-48b3771d.js";import"./ssrBoot-3f554f90.js";import"./VAvatar-0d338c12.js";import"./dialog-transition-1a37cbb8.js";import"./VMenu-3432c545.js";import"./VOverlay-14a99b98.js";import"./lazy-8c4021f0.js";import"./scopeId-203eb21d.js";import"./VCheckboxBtn-5dd1ee23.js";import"./VSelectionControl-9181ec5a.js";import"./VChip-a642ea45.js";const O=f("div",null,[f("h2",null,"Create Feedback")],-1),De={__name:"create",setup(W){const p=$(),V=A(),q=R.useToast();b(()=>document.title="Client - Create Feedback");const u=g(()=>p.state.feedbacks.loading),w=g(()=>p.state.auth.user),h=JSON.parse(w.value.permissions);b(()=>{var e;(e=h.FeedBack)!=null&&e.includes("CreateFeedBack")||(alert("You don't have permission to access this resource..."),V.go(-1))});const n=k(),o=k({title:"",description:"",ratings:"",category:""}),B=["General","Service","Product","Website"],D=["1","2","3","4","5"],T=()=>{var e;(e=n==null?void 0:n.value)==null||e.validate().then(({valid:r})=>{r&&S()})},S=async()=>{const e=new FormData;e.append("title",o.value.title),e.append("description",o.value.description),e.append("ratings",o.value.ratings),e.append("category",o.value.category);try{const r=await p.dispatch("CreateFeedback",e);r.status===200&&(q.success(r.message),V.push("/client/feedback"))}catch(r){console.error(r)}};return(e,r)=>{const N=P,_=M,U=G;return m(),c(C,null,{default:a(()=>[u.value?(m(),c(j,{key:0})):(m(),c(s,{key:1,cols:"12"},{default:a(()=>[t(L,null,{default:a(()=>[t(F,{style:{display:"flex","flex-direction":"row","align-items":"center","justify-content":"space-between"}},{default:a(()=>[O,f("div",null,[t(v,{to:"/client/feedback",rounded:"pill",color:"primary",size:"small",class:"ml-5"},{default:a(()=>[t(x,{start:"",icon:"tabler-arrow-left"}),y("Back ")]),_:1})])]),_:1}),t(I),t(F,{class:"pt-0"},{default:a(()=>[t(J,{class:"mt-6",ref_key:"refForm",ref:n,onSubmit:z(T,["prevent"])},{default:a(()=>[t(C,null,{default:a(()=>[t(s,{md:"4",cols:"12"},{default:a(()=>[t(N,{"prepend-inner-icon":"tabler-note",modelValue:l(o).title,"onUpdate:modelValue":r[0]||(r[0]=i=>l(o).title=i),placeholder:"Title","persistent-placeholder":"",label:"Title",rules:["requiredValidator"in e?e.requiredValidator:l(d)]},null,8,["modelValue","rules"])]),_:1}),t(s,{md:"4",cols:"12"},{default:a(()=>[t(_,{modelValue:l(o).category,"onUpdate:modelValue":r[1]||(r[1]=i=>l(o).category=i),items:B,"prepend-inner-icon":"tabler-color-picker",label:"Category",rules:["requiredValidator"in e?e.requiredValidator:l(d)]},null,8,["modelValue","rules"])]),_:1}),t(s,{md:"4",cols:"12"},{default:a(()=>[t(_,{modelValue:l(o).ratings,"onUpdate:modelValue":r[2]||(r[2]=i=>l(o).ratings=i),items:D,"prepend-inner-icon":"tabler-color-picker",label:"Ratings",rules:["requiredValidator"in e?e.requiredValidator:l(d)]},null,8,["modelValue","rules"])]),_:1}),t(s,{md:"12",cols:"12"},{default:a(()=>[t(U,{"prepend-inner-icon":"tabler-message-2",modelValue:l(o).description,"onUpdate:modelValue":r[3]||(r[3]=i=>l(o).description=i),placeholder:"Description","persistent-placeholder":"",label:"Description",rules:["requiredValidator"in e?e.requiredValidator:l(d)],rows:"3"},null,8,["modelValue","rules"])]),_:1}),t(s,{cols:"12"},{default:a(()=>[t(v,{type:"submit",disabled:u.value},{default:a(()=>[y(E(u.value?"Creating...":"Create"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}))]),_:1})}}};export{De as default};
