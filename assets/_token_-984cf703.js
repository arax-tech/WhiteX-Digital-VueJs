import{r as V}from"./validators-dea6e3a5.js";import{s as N,t as q,n as L,L as T,a4 as B,q as D,r as p,a as M,o as S,f as F,e as s,b as e,d,z as a,D as $,ag as j,E as A,G as E,a1 as G}from"./index-35d4c811.js";import{_ as U}from"./AppTextField-e0d36e66.js";import{u as h}from"./useGenerateImageVariant-8670e648.js";import{a as z,b as W}from"./auth-v2-reset-password-illustration-light-3895af4b.js";import{a as X,b as H}from"./misc-mask-light-1aeffaee.js";import{V as g}from"./VImg-9b04c05e.js";import{a as l,V as b}from"./VRow-d67d386c.js";import{V as J}from"./VCard-06d56730.js";import{V as P}from"./VCardText-20e2d0ff.js";import{V as K}from"./VForm-790819b5.js";import"./helpers-61e4df1a.js";import"./focus-47cc4c1d.js";import"./VTextField-9bfa6dc1.js";/* empty css                   */import"./VCounter-dcd2da2a.js";import"./VField-4ee07b6e.js";import"./easing-9f15041e.js";import"./VInput-ff4d0189.js";import"./form-ff0dacbf.js";import"./forwardRefs-8348545e.js";import"./VAvatar-7759ad5c.js";const O={class:"position-relative bg-background rounded-lg w-100 ma-8 me-0"},Q={class:"d-flex align-center justify-center w-100 h-100"},Y=d("h4",{class:"text-h4 mb-1"},"Create New Password",-1),Z=d("p",{class:"mb-0"},"Create new password for you WiteX Digital Panel...",-1),ee=d("span",null,"Back to login",-1),ye={__name:"[token]",setup(se){N(()=>document.title="Create New Password");const w=q(()=>_.state.password.loading),k=L(),v=T(),f=B.useToast(),_=D(),n=p({newPassword:"",confirmPassword:""}),u=p(),y=()=>{var o;(o=u==null?void 0:u.value)==null||o.validate().then(({valid:t})=>{t&&x()})},x=async()=>{const o=n.value.newPassword,t=n.value.confirmPassword;if(o!==t)f.error("Password Confirmation does not match...");else try{const r=await _.dispatch("ResetPasswordAction",{reset_token:k.params.token,password:o});r.status===200&&(f.success(r.message),v.push("/login")),r.status===422&&f.error(r.message)}catch(r){console.error(r)}},C=h(W,z),I=h(H,X),m=p(!1),c=p(!1);return(o,t)=>{const r=U,R=M("RouterLink");return S(),F(b,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:s(()=>[e(l,{md:"8",class:"d-none d-md-flex"},{default:s(()=>[d("div",O,[d("div",Q,[e(g,{"max-width":"400",src:a(C),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),e(g,{class:"auth-footer-mask",src:a(I)},null,8,["src"])])]),_:1}),e(l,{cols:"12",md:"4",class:"auth-card-v2 d-flex",style:{"margin-top":"10% !important"}},{default:s(()=>[e(J,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:s(()=>[e(P,null,{default:s(()=>[Y,Z]),_:1}),e(P,null,{default:s(()=>[e(K,{class:"mt-6",ref_key:"refForm",ref:u,onSubmit:$(y,["prevent"])},{default:s(()=>[e(b,null,{default:s(()=>[e(l,{cols:"12"},{default:s(()=>[e(r,{modelValue:a(n).newPassword,"onUpdate:modelValue":t[0]||(t[0]=i=>a(n).newPassword=i),autofocus:"",label:"New Password",placeholder:"············",type:a(m)?"text":"password","append-inner-icon":a(m)?"tabler-eye-off":"tabler-eye","onClick:appendInner":t[1]||(t[1]=i=>m.value=!a(m)),rules:["requiredValidator"in o?o.requiredValidator:a(V)]},null,8,["modelValue","type","append-inner-icon","rules"])]),_:1}),e(l,{cols:"12"},{default:s(()=>[e(r,{modelValue:a(n).confirmPassword,"onUpdate:modelValue":t[2]||(t[2]=i=>a(n).confirmPassword=i),label:"Confirm Password",placeholder:"············",type:a(c)?"text":"password","append-inner-icon":a(c)?"tabler-eye-off":"tabler-eye","onClick:appendInner":t[3]||(t[3]=i=>c.value=!a(c)),rules:["requiredValidator"in o?o.requiredValidator:a(V)]},null,8,["modelValue","type","append-inner-icon","rules"])]),_:1}),e(l,{cols:"12"},{default:s(()=>[e(j,{block:"",type:"submit",disabled:w.value},{default:s(()=>[A(E(w.value?"Loading...":"Set New Password"),1)]),_:1},8,["disabled"])]),_:1}),e(l,{cols:"12"},{default:s(()=>[e(R,{class:"d-flex align-center justify-center",to:{name:"login"}},{default:s(()=>[e(G,{icon:"tabler-chevron-left",class:"flip-in-rtl"}),ee]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})}}};export{ye as default};
