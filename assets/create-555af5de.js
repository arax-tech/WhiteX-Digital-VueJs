import{r as n}from"./validators-dea6e3a5.js";import{q as N,L as R,a4 as $,s as g,t as b,r as v,o as d,f as c,e as a,b as t,d as f,ag as S,a1 as A,E as q,D as I,z as l,G as P}from"./index-35d4c811.js";import{_ as z}from"./AppTextarea-f5dca398.js";import{_ as E}from"./AppSelect-676dfa2f.js";import{_ as L}from"./AppTextField-e0d36e66.js";import{_ as j}from"./Loading-891177bd.js";import{a as i,V as k}from"./VRow-d67d386c.js";import{V as C}from"./VCardText-20e2d0ff.js";import{V as G}from"./VDivider-4423ace3.js";import{V as H}from"./VForm-790819b5.js";import{V as J}from"./VCard-06d56730.js";import"./helpers-61e4df1a.js";import"./focus-47cc4c1d.js";/* empty css                   */import"./VCounter-dcd2da2a.js";import"./VImg-9b04c05e.js";import"./VField-4ee07b6e.js";import"./easing-9f15041e.js";import"./VInput-ff4d0189.js";import"./form-ff0dacbf.js";import"./forwardRefs-8348545e.js";import"./VSelect-bf5a5be9.js";import"./VTextField-9bfa6dc1.js";import"./VList-56d7996c.js";import"./ssrBoot-c2946fb8.js";import"./VAvatar-7759ad5c.js";import"./dialog-transition-5411c7b8.js";import"./VMenu-d6c3699e.js";import"./VOverlay-ec7a9eab.js";import"./lazy-4836c696.js";import"./scopeId-d5f41359.js";import"./VCheckboxBtn-d7c7ca98.js";import"./VSelectionControl-4d8986cc.js";import"./VChip-5a7d2631.js";const O=f("div",null,[f("h2",null,"Create Support Ticket")],-1),Be={__name:"create",setup(Y){const u=N(),V=R(),T=$.useToast();g(()=>document.title="Client - Supports");const m=b(()=>u.state.supports.loading),h=b(()=>u.state.auth.user),w=JSON.parse(h.value.permissions);g(()=>{var e;(e=w.SupportTicket)!=null&&e.includes("CreateSupportTicket")||(alert("You don't have permission to access this resource..."),V.go(-1))});const p=v(),o=v({title:"",message:"",department:"",priority:"",resolution_summary:""}),B=["Technical Support","Customer Service","Billing Inquiries","Product Feedback","Sales Inquiry"],D=["Low","Medium","High"],F=()=>{var e;(e=p==null?void 0:p.value)==null||e.validate().then(({valid:r})=>{r&&M()})},M=async()=>{const e=new FormData;e.append("title",o.value.title),e.append("message",o.value.message),e.append("department",o.value.department),e.append("priority",o.value.priority),e.append("resolution_summary",o.value.resolution_summary);try{const r=await u.dispatch("CreateSupport",e);r.status===200&&(T.success(r.message),V.push("/client/support"))}catch(r){console.error(r)}};return(e,r)=>{const _=L,y=E,U=z;return d(),c(k,null,{default:a(()=>[m.value?(d(),c(j,{key:0})):(d(),c(i,{key:1,cols:"12"},{default:a(()=>[t(J,null,{default:a(()=>[t(C,{style:{display:"flex","flex-direction":"row","align-items":"center","justify-content":"space-between"}},{default:a(()=>[O,f("div",null,[t(S,{to:"/client/support",rounded:"pill",color:"primary",size:"small",class:"ml-5"},{default:a(()=>[t(A,{start:"",icon:"tabler-arrow-left"}),q("Back ")]),_:1})])]),_:1}),t(G),t(C,{class:"pt-0"},{default:a(()=>[t(H,{class:"mt-6",ref_key:"refForm",ref:p,onSubmit:I(F,["prevent"])},{default:a(()=>[t(k,null,{default:a(()=>[t(i,{md:"6",cols:"12"},{default:a(()=>[t(_,{"prepend-inner-icon":"tabler-note",modelValue:l(o).title,"onUpdate:modelValue":r[0]||(r[0]=s=>l(o).title=s),placeholder:"Title","persistent-placeholder":"",label:"Title",rules:["requiredValidator"in e?e.requiredValidator:l(n)]},null,8,["modelValue","rules"])]),_:1}),t(i,{md:"6",cols:"12"},{default:a(()=>[t(_,{"prepend-inner-icon":"tabler-message",modelValue:l(o).message,"onUpdate:modelValue":r[1]||(r[1]=s=>l(o).message=s),placeholder:"Message","persistent-placeholder":"",label:"Message",rules:["requiredValidator"in e?e.requiredValidator:l(n)]},null,8,["modelValue","rules"])]),_:1}),t(i,{md:"6",cols:"12"},{default:a(()=>[t(y,{modelValue:l(o).department,"onUpdate:modelValue":r[2]||(r[2]=s=>l(o).department=s),items:B,"prepend-inner-icon":"tabler-color-picker",label:"Department",rules:["requiredValidator"in e?e.requiredValidator:l(n)]},null,8,["modelValue","rules"])]),_:1}),t(i,{md:"6",cols:"12"},{default:a(()=>[t(y,{modelValue:l(o).priority,"onUpdate:modelValue":r[3]||(r[3]=s=>l(o).priority=s),items:D,"prepend-inner-icon":"tabler-color-picker",label:"Priority",rules:["requiredValidator"in e?e.requiredValidator:l(n)]},null,8,["modelValue","rules"])]),_:1}),t(i,{md:"12",cols:"12"},{default:a(()=>[t(U,{"prepend-inner-icon":"tabler-message-2",modelValue:l(o).resolution_summary,"onUpdate:modelValue":r[4]||(r[4]=s=>l(o).resolution_summary=s),placeholder:"Resolution Summary","persistent-placeholder":"",label:"Resolution Summary",rules:["requiredValidator"in e?e.requiredValidator:l(n)],rows:"3"},null,8,["modelValue","rules"])]),_:1}),t(i,{cols:"12"},{default:a(()=>[t(S,{type:"submit",disabled:m.value},{default:a(()=>[q(P(m.value?"Creating...":"Create"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}))]),_:1})}}};export{Be as default};
