import{r as p}from"./validators-dea6e3a5.js";import{q as G,n as M,L as x,a4 as z,s as v,t as c,a0 as E,r as k,o as m,f,e as r,b as t,d as V,ag as y,a1 as P,E as F,D as j,z as i,G as I}from"./index-35d4c811.js";import{_ as J}from"./AppTextarea-f5dca398.js";import{_ as L}from"./AppSelect-676dfa2f.js";import{_ as O}from"./AppTextField-e0d36e66.js";import{_ as W}from"./Loading-891177bd.js";import{a as l,V as U}from"./VRow-d67d386c.js";import{V as h}from"./VCardText-20e2d0ff.js";import{V as Y}from"./VDivider-4423ace3.js";import{V as H}from"./VForm-790819b5.js";import{V as K}from"./VCard-06d56730.js";import"./helpers-61e4df1a.js";import"./focus-47cc4c1d.js";/* empty css                   */import"./VCounter-dcd2da2a.js";import"./VImg-9b04c05e.js";import"./VField-4ee07b6e.js";import"./easing-9f15041e.js";import"./VInput-ff4d0189.js";import"./form-ff0dacbf.js";import"./forwardRefs-8348545e.js";import"./VSelect-bf5a5be9.js";import"./VTextField-9bfa6dc1.js";import"./VList-56d7996c.js";import"./ssrBoot-c2946fb8.js";import"./VAvatar-7759ad5c.js";import"./dialog-transition-5411c7b8.js";import"./VMenu-d6c3699e.js";import"./VOverlay-ec7a9eab.js";import"./lazy-4836c696.js";import"./scopeId-d5f41359.js";import"./VCheckboxBtn-d7c7ca98.js";import"./VSelectionControl-4d8986cc.js";import"./VChip-5a7d2631.js";const Q=V("div",null,[V("h2",null,"Update Feedback")],-1),Re={__name:"[id]",setup(X){const n=G(),g=M(),b=x(),q=z.useToast();v(()=>document.title="Client - Update Feedback");const u=c(()=>n.state.feedbacks.loading),w=c(()=>n.state.feedbacks.feedback);E(async()=>{await n.dispatch("GetSingleFeedback",g.params.id),S()});const D=c(()=>n.state.auth.user),B=JSON.parse(D.value.permissions);v(()=>{var e;(e=B.FeedBack)!=null&&e.includes("UpdateFeedBack")||(alert("You don't have permission to access this resource..."),b.go(-1))});const S=()=>{const e=w.value;e&&(a.value.title=e.title,a.value.description=e.description,a.value.ratings=e.ratings,a.value.category=e.category)},d=k(),a=k({title:"",description:"",ratings:"",category:""}),T=["General","Service","Product","Website"],C=["1","2","3","4","5"],N=()=>{var e;(e=d==null?void 0:d.value)==null||e.validate().then(({valid:o})=>{o&&R()})},R=async()=>{const e=new FormData;e.append("title",a.value.title),e.append("description",a.value.description),e.append("ratings",a.value.ratings),e.append("category",a.value.category);try{const o=await n.dispatch("UpdateFeedback",{id:g.params.id,formData:e});o.status===200&&(q.success(o.message),b.push("/client/feedback"))}catch(o){console.error(o)}};return(e,o)=>{const $=O,_=L,A=J;return m(),f(U,null,{default:r(()=>[u.value?(m(),f(W,{key:0})):(m(),f(l,{key:1,cols:"12"},{default:r(()=>[t(K,null,{default:r(()=>[t(h,{style:{display:"flex","flex-direction":"row","align-items":"center","justify-content":"space-between"}},{default:r(()=>[Q,V("div",null,[t(y,{to:"/client/feedback",rounded:"pill",color:"primary",size:"small",class:"ml-5"},{default:r(()=>[t(P,{start:"",icon:"tabler-arrow-left"}),F("Back ")]),_:1})])]),_:1}),t(Y),t(h,{class:"pt-0"},{default:r(()=>[t(H,{class:"mt-6",ref_key:"refForm",ref:d,onSubmit:j(N,["prevent"])},{default:r(()=>[t(U,null,{default:r(()=>[t(l,{md:"4",cols:"12"},{default:r(()=>[t($,{"prepend-inner-icon":"tabler-note",modelValue:i(a).title,"onUpdate:modelValue":o[0]||(o[0]=s=>i(a).title=s),placeholder:"Title","persistent-placeholder":"",label:"Title",rules:["requiredValidator"in e?e.requiredValidator:i(p)]},null,8,["modelValue","rules"])]),_:1}),t(l,{md:"4",cols:"12"},{default:r(()=>[t(_,{modelValue:i(a).category,"onUpdate:modelValue":o[1]||(o[1]=s=>i(a).category=s),items:T,"prepend-inner-icon":"tabler-color-picker",label:"Category",rules:["requiredValidator"in e?e.requiredValidator:i(p)]},null,8,["modelValue","rules"])]),_:1}),t(l,{md:"4",cols:"12"},{default:r(()=>[t(_,{modelValue:i(a).ratings,"onUpdate:modelValue":o[2]||(o[2]=s=>i(a).ratings=s),items:C,"prepend-inner-icon":"tabler-color-picker",label:"Ratings",rules:["requiredValidator"in e?e.requiredValidator:i(p)]},null,8,["modelValue","rules"])]),_:1}),t(l,{md:"12",cols:"12"},{default:r(()=>[t(A,{"prepend-inner-icon":"tabler-message-2",modelValue:i(a).description,"onUpdate:modelValue":o[3]||(o[3]=s=>i(a).description=s),placeholder:"Description","persistent-placeholder":"",label:"Description",rules:["requiredValidator"in e?e.requiredValidator:i(p)],rows:"3"},null,8,["modelValue","rules"])]),_:1}),t(l,{cols:"12"},{default:r(()=>[t(y,{type:"submit",disabled:u.value},{default:r(()=>[F(I(u.value?"Updating...":"Update"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}))]),_:1})}}};export{Re as default};
