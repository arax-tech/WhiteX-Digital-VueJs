import{r as p}from"./validators-dea6e3a5.js";import{s as m,q as y,a4 as S,L as A,t as V,r as h,o as C,f as P,e as t,b as a,D as w,z as o,ag as D,E as F,G as N}from"./index-670bda14.js";import{_ as E}from"./AppTextField-803105de.js";import{V as T}from"./VCard-367227de.js";import{V as B}from"./VDivider-964da8ec.js";import{V as G}from"./VCardText-83b6dd60.js";import{V as L}from"./VForm-e3bcef70.js";import{V as v,a as s}from"./VRow-44af3a5b.js";import{V as f}from"./VFileInput-a58c2458.js";import"./helpers-61e4df1a.js";import"./focus-bfe812d1.js";import"./VTextField-babd124d.js";/* empty css                   */import"./VCounter-40602143.js";import"./VImg-4f1dd734.js";import"./VField-eebd85ff.js";import"./easing-9f15041e.js";import"./VInput-28c68c55.js";import"./form-f40ca62b.js";import"./forwardRefs-8348545e.js";import"./VAvatar-eedc1aa8.js";import"./VChip-c9c9bc7b.js";const te={__name:"setting",setup(M){m(()=>document.title="Admin - Setting"),m(()=>u.dispatch("GetAuthUser"));const u=y(),g=S.useToast(),_=A(),i=V(()=>u.state.auth.setting),c=V(()=>u.state.auth.loading),b=V(()=>u.state.auth.user),q=JSON.parse(b.value.permissions);m(()=>{var r;(r=q.Setting)!=null&&r.includes("ReadSetting")||(alert("You don't have permission to access this resource..."),_.go(-1))});const l=h({company_name:i.value.company_name,email:i.value.email,phone1:i.value.phone1,phone2:i.value.phone2,phone3:i.value.phone3,address_1:i.value.address_1,address_2:i.value.address_2,menu_logo:null,fevicon:null,invoice_logo:null});h();const U=async r=>{r.preventDefault();const e=new FormData;e.append("company_name",l.value.company_name),e.append("email",l.value.email),e.append("phone1",l.value.phone1),e.append("phone2",l.value.phone2),e.append("phone3",l.value.phone3),e.append("address_1",l.value.address_1),e.append("address_2",l.value.address_2),e.append("menu_logo",l.value.menu_logo),e.append("fevicon",l.value.fevicon),e.append("invoice_logo",l.value.invoice_logo);try{const d=await u.dispatch("UpdateSettingAction",e);d.status===200&&(u.dispatch("GetAuthUser"),g.success(d.message))}catch(d){console.error(d)}};return(r,e)=>{const d=E;return C(),P(v,null,{default:t(()=>[a(s,{cols:"12"},{default:t(()=>[a(T,{title:"Setting"},{default:t(()=>[a(B),a(G,{class:"pt-0"},{default:t(()=>[a(L,{class:"mt-6",onSubmit:w(U,["prevent"])},{default:t(()=>[a(v,null,{default:t(()=>[a(s,{md:"3",cols:"12"},{default:t(()=>[a(d,{"prepend-inner-icon":"tabler-user",modelValue:o(l).company_name,"onUpdate:modelValue":e[0]||(e[0]=n=>o(l).company_name=n),placeholder:"Company Name","persistent-placeholder":"",label:"Company Name",rules:["requiredValidator"in r?r.requiredValidator:o(p)]},null,8,["modelValue","rules"])]),_:1}),a(s,{md:"3",cols:"12"},{default:t(()=>[a(d,{"prepend-inner-icon":"tabler-mail",modelValue:o(l).email,"onUpdate:modelValue":e[1]||(e[1]=n=>o(l).email=n),placeholder:"Email","persistent-placeholder":"",label:"Email",rules:["requiredValidator"in r?r.requiredValidator:o(p)]},null,8,["modelValue","rules"])]),_:1}),a(s,{md:"3",cols:"12"},{default:t(()=>[a(d,{"prepend-inner-icon":"tabler-phone",modelValue:o(l).phone1,"onUpdate:modelValue":e[2]||(e[2]=n=>o(l).phone1=n),placeholder:"Phone1","persistent-placeholder":"",label:"Phone1",rules:["requiredValidator"in r?r.requiredValidator:o(p)]},null,8,["modelValue","rules"])]),_:1}),a(s,{md:"3",cols:"12"},{default:t(()=>[a(d,{"prepend-inner-icon":"tabler-phone",modelValue:o(l).phone2,"onUpdate:modelValue":e[3]||(e[3]=n=>o(l).phone2=n),placeholder:"Phone2","persistent-placeholder":"",label:"Phone2",rules:["requiredValidator"in r?r.requiredValidator:o(p)]},null,8,["modelValue","rules"])]),_:1}),a(s,{md:"4",cols:"12"},{default:t(()=>[a(d,{"prepend-inner-icon":"tabler-phone",modelValue:o(l).phone3,"onUpdate:modelValue":e[4]||(e[4]=n=>o(l).phone3=n),placeholder:"Phone3","persistent-placeholder":"",label:"Phone3",rules:["requiredValidator"in r?r.requiredValidator:o(p)]},null,8,["modelValue","rules"])]),_:1}),a(s,{md:"4",cols:"12"},{default:t(()=>[a(d,{"prepend-inner-icon":"tabler-map-pin",modelValue:o(l).address_1,"onUpdate:modelValue":e[5]||(e[5]=n=>o(l).address_1=n),placeholder:"Address 1","persistent-placeholder":"",label:"Address 1",rules:["requiredValidator"in r?r.requiredValidator:o(p)]},null,8,["modelValue","rules"])]),_:1}),a(s,{md:"4",cols:"12"},{default:t(()=>[a(d,{"prepend-inner-icon":"tabler-map-pin",modelValue:o(l).address_2,"onUpdate:modelValue":e[6]||(e[6]=n=>o(l).address_2=n),placeholder:"Address 2","persistent-placeholder":"",label:"Address 2",rules:["requiredValidator"in r?r.requiredValidator:o(p)]},null,8,["modelValue","rules"])]),_:1}),a(s,{md:"4",cols:"12",class:"mt-2"},{default:t(()=>[a(f,{label:"Fevicon",variant:"filled",onChange:e[7]||(e[7]=n=>o(l).fevicon=n.target.files[0])})]),_:1}),a(s,{md:"4",cols:"12",class:"mt-2"},{default:t(()=>[a(f,{label:"Menu Logo",variant:"filled",onChange:e[8]||(e[8]=n=>o(l).menu_logo=n.target.files[0])})]),_:1}),a(s,{md:"4",cols:"12",class:"mt-2"},{default:t(()=>[a(f,{label:"Invoice Logo",variant:"filled",onChange:e[9]||(e[9]=n=>o(l).invoice_logo=n.target.files[0])})]),_:1}),a(s,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[a(D,{type:"submit",disabled:c.value},{default:t(()=>[F(N(c.value?"Updating...":"Update"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{te as default};
