import{r as _}from"./validators-dea6e3a5.js";import{q as j,L as z,n as I,a4 as G,s as U,a0 as J,t as x,r as b,o as p,f as y,e as s,b as l,d as o,ag as D,a1 as L,E as P,D as Z,z as n,x as H,aj as K,a2 as Q,c as f,C as q,G as W,F as C}from"./index-670bda14.js";import{_ as X}from"./AppTextField-803105de.js";import{_ as Y}from"./Loading-0e8ee1a0.js";import{C as k}from"./Permission-f91c8685.js";import{a as c,V as A}from"./VRow-44af3a5b.js";import{V as T}from"./VCardText-83b6dd60.js";import{V as N}from"./VDivider-964da8ec.js";import{V as ee}from"./VForm-e3bcef70.js";import{V as ae}from"./VFileInput-a58c2458.js";import{V as le}from"./VTable-3015d60e.js";import{V as te}from"./VCard-367227de.js";import"./helpers-61e4df1a.js";import"./focus-bfe812d1.js";import"./VTextField-babd124d.js";/* empty css                   */import"./VCounter-40602143.js";import"./VImg-4f1dd734.js";import"./VField-eebd85ff.js";import"./easing-9f15041e.js";import"./VInput-28c68c55.js";import"./form-f40ca62b.js";import"./forwardRefs-8348545e.js";import"./VAvatar-eedc1aa8.js";import"./VChip-c9c9bc7b.js";const oe=o("div",null,[o("h2",null,"Update Team")],-1),se=o("label",null,"Profile Image",-1),ne={style:{display:"flex","flex-direction":"row","align-items":"center","justify-content":"space-between"}},ie=o("h2",{class:"mb-2"},"Permissions",-1),re=o("label",{for:"checkAll"},"Â All Permission",-1),de=o("thead",null,[o("tr",null,[o("th",{scope:"col"},"Modal"),o("th",{scope:"col"},"Create"),o("th",{scope:"col"},"Read"),o("th",{scope:"col"},"Update"),o("th",{scope:"col"},"Delete")])],-1),ue={key:0},me=["value","checked","onChange"],pe={key:1},je={__name:"[id]",setup(ce){const h=j(),F=z(),B=I(),R=G.useToast();U(()=>document.title="Client - Update Team"),J(async()=>{await h.dispatch("GetSingleTeamAction",B.params.id),S()});const r=x(()=>h.state.teams.team),u=b({}),w=()=>{for(const e in k)u.value[e]=v.value?k[e].permissions.slice():[]},v=b(!1);U(()=>{w()});const S=()=>{const e=r.value;if(e){t.value.name=e.name,t.value.email=e.email,t.value.phone=e.phone,t.value.designation=e.designation;const a=JSON.parse(e.permissions);for(const d in k)u.value[d]=a[d]||[]}},E=x(()=>h.state.teams.loading),V=b(),t=b({name:r.value?r.value.name:"",email:r.value?r.value.email:"",phone:r.value?r.value.phone:"",designation:r.value?r.value.designation:"",image:null}),M=async()=>{const e=new FormData;e.append("name",t.value.name),e.append("email",t.value.email),e.append("phone",t.value.phone),e.append("designation",t.value.designation),e.append("permissions",JSON.stringify(u.value)),t.value.image&&e.append("image",t.value.image);try{const a=await h.dispatch("UpdateTeamAction",{id:r.value.id,formData:e});a.status===200&&(R.success(a.message),F.push("/client/team"))}catch(a){console.error(a)}},O=()=>{var e;(e=V==null?void 0:V.value)==null||e.validate().then(({valid:a})=>{a&&M()})},$=(e,a)=>{if(u.value.hasOwnProperty(e)){const d=u.value[e].indexOf(a);d!==-1?u.value[e].splice(d,1):u.value[e].push(a)}};return(e,a)=>{const d=X;return p(),y(A,null,{default:s(()=>[E.value?(p(),y(Y,{key:0})):(p(),y(c,{key:1,cols:"12"},{default:s(()=>[l(te,null,{default:s(()=>[l(T,{style:{display:"flex","flex-direction":"row","align-items":"center","justify-content":"space-between"}},{default:s(()=>[oe,o("div",null,[l(D,{to:"/client/team",rounded:"pill",color:"primary",size:"small",class:"ml-5"},{default:s(()=>[l(L,{start:"",icon:"tabler-arrow-left"}),P("Back ")]),_:1})])]),_:1}),l(N),l(T,{class:"pt-0"},{default:s(()=>[l(ee,{class:"mt-6",ref_key:"refForm",ref:V,onSubmit:Z(O,["prevent"])},{default:s(()=>[l(A,null,{default:s(()=>[l(c,{md:"4",cols:"12"},{default:s(()=>[l(d,{"prepend-inner-icon":"tabler-user",placeholder:"Name",name:"name",modelValue:n(t).name,"onUpdate:modelValue":a[0]||(a[0]=i=>n(t).name=i),"persistent-placeholder":"",label:"Name",rules:["requiredValidator"in e?e.requiredValidator:n(_)]},null,8,["modelValue","rules"])]),_:1}),l(c,{md:"4",cols:"12"},{default:s(()=>[l(d,{"prepend-inner-icon":"tabler-mail",modelValue:n(t).email,"onUpdate:modelValue":a[1]||(a[1]=i=>n(t).email=i),placeholder:"Email","persistent-placeholder":"",label:"Email",rules:["requiredValidator"in e?e.requiredValidator:n(_)]},null,8,["modelValue","rules"])]),_:1}),l(c,{md:"4",cols:"12"},{default:s(()=>[l(d,{"prepend-inner-icon":"tabler-phone",modelValue:n(t).phone,"onUpdate:modelValue":a[2]||(a[2]=i=>n(t).phone=i),placeholder:"Phone","persistent-placeholder":"",label:"Phone",rules:["requiredValidator"in e?e.requiredValidator:n(_)]},null,8,["modelValue","rules"])]),_:1}),l(c,{md:"6",cols:"12"},{default:s(()=>[l(d,{"prepend-inner-icon":"tabler-note",modelValue:n(t).designation,"onUpdate:modelValue":a[3]||(a[3]=i=>n(t).designation=i),placeholder:"Designation","persistent-placeholder":"",label:"Designation",rules:["requiredValidator"in e?e.requiredValidator:n(_)]},null,8,["modelValue","rules"])]),_:1}),l(c,{md:"6",cols:"12",class:""},{default:s(()=>[se,l(ae,{label:"Choose...",class:"mt-1",onChange:a[4]||(a[4]=i=>n(t).image=i.target.files[0])})]),_:1}),l(c,{cols:"12",md:"12",class:"mt-6"},{default:s(()=>[o("div",ne,[ie,o("div",null,[H(o("input",{id:"checkAll",type:"checkbox","onUpdate:modelValue":a[5]||(a[5]=i=>Q(v)?v.value=i:null),onChange:w},null,544),[[K,n(v)]]),re])]),l(le,{class:"text-no-wrap rounded border"},{default:s(()=>[de,o("tbody",null,[(p(!0),f(C,null,q(n(k),(i,m)=>(p(),f("tr",{key:m},[o("td",null,W(m.replace(/([a-z])([A-Z])/g,"$1 $2")),1),(p(),f(C,null,q(["Create","Read","Update","Delete"],g=>(p(),f(C,null,[i.permissions.includes(g+m)?(p(),f("td",ue,[o("input",{type:"checkbox",value:g+m,class:"checkbox",checked:n(u)[m]&&n(u)[m].includes(g+m),onChange:fe=>$(m,g+m)},null,40,me)])):(p(),f("td",pe))],64))),64))]))),128))])]),_:1})]),_:1}),l(c,{cols:"12"},{default:s(()=>[l(D,{type:"submit"},{default:s(()=>[P("Update")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}))]),_:1})}}};export{je as default};
