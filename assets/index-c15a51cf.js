import{q as B,a4 as w,L as T,s as d,t as m,a as A,o as s,f as n,e,b as o,d as r,z as i,ag as N,a1 as _,E as b,H as u,G as f,c as C}from"./index-c4e71550.js";import{_ as M}from"./Loading-2eec0421.js";import{h as E}from"./moment-a9aaa855.js";import{a as G,V as I}from"./VRow-3a397f81.js";import{V as P}from"./VCardText-6669d6f5.js";import{V as z}from"./VDataTable-145871c8.js";import{V as g}from"./VTooltip-a22fc0c5.js";import{V as U}from"./VCard-71b3ac17.js";import"./VAvatar-0d338c12.js";import"./VImg-8451f417.js";import"./VSelect-9628140b.js";import"./VTextField-47e6f93c.js";/* empty css                   */import"./VCounter-856e1893.js";import"./VField-0f4003e5.js";import"./focus-ba6d54b4.js";import"./easing-9f15041e.js";import"./VInput-6532c874.js";import"./form-d2acef44.js";import"./forwardRefs-8348545e.js";import"./VList-48b3771d.js";import"./ssrBoot-3f554f90.js";import"./VDivider-aef533a2.js";import"./dialog-transition-1a37cbb8.js";import"./VMenu-3432c545.js";import"./VOverlay-14a99b98.js";import"./lazy-8c4021f0.js";import"./scopeId-203eb21d.js";import"./VCheckboxBtn-5dd1ee23.js";import"./VSelectionControl-9181ec5a.js";import"./VChip-a642ea45.js";import"./VTable-28a89234.js";import"./filter-c3387b54.js";const $=r("div",null,[r("h2",null,"Subscription Cancellation Requests")],-1),j={class:"text-xs"},H={class:"text-xs"},J={key:0,style:{padding:"2px 10px"},class:"rounded bg-primary mr-1"},L={key:1,style:{padding:"2px 10px"},class:"rounded bg-success mr-1"},O={key:2,style:{padding:"2px 10px","background-color":"#c72c2c",color:"#fff"},class:"rounded bg-danger mr-1"},Y={class:"text-xs"},Bt={__name:"index",setup(F){const a=B(),V=w.useToast(),y=T();d(()=>document.title="Client - Subscription Cancellation Requests"),d(()=>a.dispatch("GetSubscriptionCancellations"));const v=m(()=>a.state.subscriptionCancellations.cancellations),q=m(()=>a.state.subscriptionCancellations.loading),R=m(()=>a.state.auth.user),p=JSON.parse(R.value.permissions);d(()=>{var c;(c=p.CancellationRequests)!=null&&c.includes("ReadCancellationRequests")||(alert("You don't have permission to access this resource..."),y.go(-1))});const D=[{title:"Title",key:"subscription.title"},{title:"Description",key:"subscription.description"},{title:"Status",key:"subscription.status"},{title:"Date",key:"subscription.date"},{title:"Action",key:"subscription.action",sortable:!1}],S=async c=>{if(confirm("Are you sure to delete ?"))try{const l=await a.dispatch("DeleteSubscriptionCancellations",c);l.status===200&&(V.error(l.message),a.dispatch("GetSubscriptionCancellations"))}catch(l){console.log(l)}};return(c,l)=>{const h=A("IconBtn");return s(),n(I,null,{default:e(()=>[q.value?(s(),n(M,{key:0})):(s(),n(G,{key:1,cols:"12"},{default:e(()=>[o(U,null,{default:e(()=>[o(P,{style:{display:"flex","flex-direction":"row","align-items":"center","justify-content":"space-between","border-bottom":"thin solid rgba(var(--v-border-color), var(--v-border-opacity))"}},{default:e(()=>{var t;return[$,r("div",null,[(t=i(p).CancellationRequests)!=null&&t.includes("CreateCancellationRequests")?(s(),n(N,{key:0,to:"/client/subscription/cancellation/requests/create",rounded:"pill",color:"primary",size:"small",class:"ml-5"},{default:e(()=>[o(_,{start:"",icon:"tabler-plus"}),b("Create ")]),_:1})):u("",!0)])]}),_:1}),o(i(z),{headers:D,items:v.value,"items-per-page":5,class:"text-no-wrap mb-4"},{"item.subscription.title":e(({item:t})=>[r("span",j,f(t==null?void 0:t.title),1)]),"item.subscription.description":e(({item:t})=>[r("span",H,f(t==null?void 0:t.description),1)]),"item.subscription.status":e(({item:t})=>[(t==null?void 0:t.status)==="Pending"?(s(),C("span",J,"Pending")):(t==null?void 0:t.status)==="Approved"?(s(),C("span",L,"Approved")):(t==null?void 0:t.status)==="Cancelled"?(s(),C("span",O,"Cancelled")):u("",!0)]),"item.subscription.date":e(({item:t})=>[r("span",Y,f(i(E)(t==null?void 0:t.created_at).format("DD MMM yyyy, hh:mm A")),1)]),"item.subscription.action":e(({item:t})=>{var k,x;return[(k=i(p).CancellationRequests)!=null&&k.includes("UpdateCancellationRequests")?(s(),n(h,{key:0,onClick:()=>i(y).push("/client/subscription/cancellation/requests/edit/"+t.id)},{default:e(()=>[o(g,{activator:"parent",location:"top"},{default:e(()=>[b("Update")]),_:1}),o(_,{icon:"tabler-edit"})]),_:2},1032,["onClick"])):u("",!0),(x=i(p).CancellationRequests)!=null&&x.includes("DeleteCancellationRequests")?(s(),n(h,{key:1,onClick:K=>S(t.id)},{default:e(()=>[o(g,{activator:"parent",location:"top"},{default:e(()=>[b("Delete")]),_:1}),o(_,{icon:"tabler-trash"})]),_:2},1032,["onClick"])):u("",!0)]}),_:1},8,["items"])]),_:1})]),_:1}))]),_:1})}}};export{Bt as default};
