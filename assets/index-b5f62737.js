import{_ as I}from"./AppTextField-803105de.js";import{q as M,L as S,a4 as E,s as h,t as f,r as G,a as U,o as r,f as d,e as t,b as a,d as o,E as _,z as s,ag as $,a1 as g,H as x,a2 as z,G as c}from"./index-670bda14.js";import{_ as j}from"./Loading-0e8ee1a0.js";import{h as q}from"./moment-a9aaa855.js";import{a as y,V as v}from"./VRow-44af3a5b.js";import{V as F}from"./VCardText-83b6dd60.js";import{V as H}from"./VDataTable-674b624c.js";import{V as J}from"./VImg-4f1dd734.js";import{V as b}from"./VTooltip-4a06c0c7.js";import{V as L}from"./VCard-367227de.js";import"./focus-bfe812d1.js";import"./VTextField-babd124d.js";/* empty css                   */import"./VCounter-40602143.js";import"./VField-eebd85ff.js";import"./easing-9f15041e.js";import"./VInput-28c68c55.js";import"./form-f40ca62b.js";import"./forwardRefs-8348545e.js";import"./VAvatar-eedc1aa8.js";import"./VSelect-80bd1ff2.js";import"./VList-faf63776.js";import"./ssrBoot-587632ee.js";import"./VDivider-964da8ec.js";import"./dialog-transition-a3b422c0.js";import"./VMenu-cbe945a0.js";import"./VOverlay-9bca4c5f.js";import"./lazy-055ec9ba.js";import"./scopeId-78466d19.js";import"./VCheckboxBtn-770097af.js";import"./VSelectionControl-798a6484.js";import"./VChip-c9c9bc7b.js";import"./VTable-3015d60e.js";import"./filter-9f13f1fe.js";const O={class:"d-flex align-center"},P={class:"d-flex flex-column ms-3"},Y={class:"d-block font-weight-medium text-truncate text-high-emphasis"},K={class:"text-xs"},Q={class:"text-xs"},W={class:"text-xs"},X={class:"text-xs"},Ee={__name:"index",setup(Z){const n=M(),A=S(),C=E.useToast();h(()=>document.title="Admin - Admins"),h(()=>n.dispatch("GetAdmins"));const D=f(()=>n.state.admins.admins),w=f(()=>n.state.admins.loading),B=f(()=>n.state.auth.user),p=JSON.parse(B.value.permissions);h(()=>{var l;(l=p.Admin)!=null&&l.includes("ReadAdmin")||(alert("You don't have permission to access this resource..."),A.go(-1))});const u=G(""),T=[{title:"Admin",key:"admin.name"},{title:"Email",key:"admin.email"},{title:"designation",key:"admin.designation"},{title:"Register At",key:"admin.created_at"},{title:"Action",key:"admin.delete",sortable:!1}],N=async l=>{if(confirm("Are you sure to delete ?"))try{const i=await n.dispatch("DeleteAdminAction",l);i.status===200&&(C.error(i.message),n.dispatch("GetAdmins"))}catch(i){console.log(i)}};return(l,i)=>{const R=I,V=U("IconBtn");return r(),d(v,null,{default:t(()=>[w.value?(r(),d(j,{key:0})):(r(),d(y,{key:1,cols:"12"},{default:t(()=>[a(L,null,{default:t(()=>[a(F,{style:{"border-bottom":"thin solid rgba(var(--v-border-color), var(--v-border-opacity))"}},{default:t(()=>[a(v,null,{default:t(()=>[a(y,{cols:"8",md:"8"},{default:t(()=>{var e;return[o("h2",null,[_("Admins "),(e=s(p).Admin)!=null&&e.includes("CreateAdmin")?(r(),d($,{key:0,to:"/admin/admin/create",rounded:"pill",color:"primary",size:"small",class:"ml-5"},{default:t(()=>[a(g,{start:"",icon:"tabler-plus"}),_(" Create ")]),_:1})):x("",!0)])]}),_:1}),a(y,{cols:"4",md:"4"},{default:t(()=>[a(R,{modelValue:s(u),"onUpdate:modelValue":i[0]||(i[0]=e=>z(u)?u.value=e:null),density:"compact",placeholder:"Search ...","append-inner-icon":"tabler-search","single-line":"","hide-details":"",dense:"",outlined:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(s(H),{headers:T,items:D.value,search:s(u),"items-per-page":5,class:"text-no-wrap mb-4"},{"item.admin.name":t(({item:e})=>{var m;return[o("div",O,[o("div",null,[a(J,{rounded:"",src:((m=e.image)==null?void 0:m.length)>0?e.image:"/placeholder.jpg",height:"40",width:"40"},null,8,["src"])]),o("div",P,[o("span",Y,c(e.name),1),o("span",K,c(e.designation),1)])])]}),"item.admin.email":t(({item:e})=>[o("span",Q,c(e.email),1)]),"item.admin.designation":t(({item:e})=>[o("span",W,c(e.designation.length>0?e.designation:"Client"),1)]),"item.admin.created_at":t(({item:e})=>[o("span",X,c(s(q)(e==null?void 0:e.created_at).format("DD MMM yyyy, hh:mm A")),1)]),"item.admin.delete":t(({item:e})=>{var m,k;return[(m=s(p).Admin)!=null&&m.includes("UpdateAdmin")?(r(),d(V,{key:0,onClick:()=>s(A).push("/admin/admin/edit/"+e.id)},{default:t(()=>[a(b,{activator:"parent",location:"top"},{default:t(()=>[_("Update")]),_:1}),a(g,{icon:"tabler-edit"})]),_:2},1032,["onClick"])):x("",!0),(k=s(p).Admin)!=null&&k.includes("DeleteAdmin")?(r(),d(V,{key:1,onClick:ee=>N(e.id)},{default:t(()=>[a(b,{activator:"parent",location:"top"},{default:t(()=>[_("Delete")]),_:1}),a(g,{icon:"tabler-trash"})]),_:2},1032,["onClick"])):x("",!0)]}),_:1},8,["items","search"])]),_:1})]),_:1}))]),_:1})}}};export{Ee as default};
