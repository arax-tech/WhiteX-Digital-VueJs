import{_ as A}from"./AppTextField-803105de.js";import{q as G,a4 as I,L as U,s as k,t as _,r as l,a as $,o as d,f as p,e as t,b as a,d as c,E as f,z as s,ag as z,a1 as b,H as B,a2 as E,ac as M,G as i}from"./index-670bda14.js";import{_ as q}from"./Loading-0e8ee1a0.js";import{a as h,V as C}from"./VRow-44af3a5b.js";import{V as H}from"./VCardText-83b6dd60.js";import{V as J}from"./VDataTable-674b624c.js";import{V as F}from"./VTooltip-4a06c0c7.js";import{V as L}from"./VCard-367227de.js";import"./focus-bfe812d1.js";import"./VTextField-babd124d.js";/* empty css                   */import"./VCounter-40602143.js";import"./VImg-4f1dd734.js";import"./VField-eebd85ff.js";import"./easing-9f15041e.js";import"./VInput-28c68c55.js";import"./form-f40ca62b.js";import"./forwardRefs-8348545e.js";import"./VAvatar-eedc1aa8.js";import"./VSelect-80bd1ff2.js";import"./VList-faf63776.js";import"./ssrBoot-587632ee.js";import"./VDivider-964da8ec.js";import"./dialog-transition-a3b422c0.js";import"./VMenu-cbe945a0.js";import"./VOverlay-9bca4c5f.js";import"./lazy-055ec9ba.js";import"./scopeId-78466d19.js";import"./VCheckboxBtn-770097af.js";import"./VSelectionControl-798a6484.js";import"./VChip-c9c9bc7b.js";import"./VTable-3015d60e.js";import"./filter-9f13f1fe.js";const O={class:"text-xs"},P={class:"text-xs"},Y={class:"text-xs"},j={class:"text-xs"},K={class:"text-xs"},Se={__name:"index",setup(Q){const r=G(),v=I.useToast(),y=U();k(()=>document.title="Client - Feedbacks"),k(()=>r.dispatch("GetFeedbacks"));const T=_(()=>r.state.feedbacks.data),D=_(()=>r.state.feedbacks.loading),N=_(()=>r.state.auth.user),m=JSON.parse(N.value.permissions);k(()=>{var n;(n=m.FeedBack)!=null&&n.includes("ReadFeedBack")||(alert("You don't have permission to access this resource..."),y.go(-1))}),l({}),l("");const u=l("");l(!1);const R=[{title:"Title",key:"feedback.title"},{title:"Description",key:"feedback.description"},{title:"Category",key:"feedback.category"},{title:"Ratings",key:"feedback.ratings"},{title:"Action Taken",key:"feedback.taken"},{title:"Actions",key:"feedback.action",sortable:!1}];l();const S=async n=>{if(confirm("Are you sure to delete ?"))try{const o=await r.dispatch("DeleteFeedback",n);o.status===200&&(v.error(o.message),r.dispatch("GetFeedbacks"))}catch(o){console.log(o)}};return(n,o)=>{const w=A,g=$("IconBtn");return d(),p(C,null,{default:t(()=>[D.value?(d(),p(q,{key:0})):(d(),p(h,{key:1,cols:"12"},{default:t(()=>[a(L,null,{default:t(()=>{var V;return[a(H,{style:{"border-bottom":"thin solid rgba(var(--v-border-color), var(--v-border-opacity))"}},{default:t(()=>[a(C,null,{default:t(()=>[a(h,{cols:"8",md:"8"},{default:t(()=>{var e;return[c("h2",null,[f("Feedbacks "),(e=s(m).FeedBack)!=null&&e.includes("CreateFeedBack")?(d(),p(z,{key:0,to:"/client/feedback/create",rounded:"pill",color:"primary",size:"small",class:"ml-5"},{default:t(()=>[a(b,{start:"",icon:"tabler-plus"}),f(" Create ")]),_:1})):B("",!0)])]}),_:1}),a(h,{cols:"4",md:"4"},{default:t(()=>[a(w,{modelValue:s(u),"onUpdate:modelValue":o[0]||(o[0]=e=>E(u)?u.value=e:null),density:"compact",placeholder:"Search ...","append-inner-icon":"tabler-search","single-line":"","hide-details":"",dense:"",outlined:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(s(J),{headers:R,items:T.value,search:s(u),"items-per-page":5,class:"text-no-wrap mb-4"},M({"item.feedback.title":t(({item:e})=>[c("span",O,i(e.title),1)]),"item.feedback.description":t(({item:e})=>[c("span",P,i(e==null?void 0:e.description.substring(0,35))+" "+i((e==null?void 0:e.description.length)>35?"...":""),1)]),"item.feedback.category":t(({item:e})=>[c("span",Y,i(e.category),1)]),"item.feedback.ratings":t(({item:e})=>[c("span",j,i(e.ratings),1)]),"item.feedback.taken":t(({item:e})=>[c("span",K,i(e!=null&&e.action_taken?e==null?void 0:e.action_taken:"-"),1)]),_:2},[(V=s(m).FeedBack)!=null&&V.includes("UpdateFeedBack")?{name:"item.feedback.action",fn:t(({item:e})=>{var x;return[a(g,{onClick:()=>s(y).push("/client/feedback/edit/"+e.id)},{default:t(()=>[a(F,{activator:"parent",location:"top"},{default:t(()=>[f("Update")]),_:1}),a(b,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),(x=s(m).FeedBack)!=null&&x.includes("DeleteFeedBack")?(d(),p(g,{key:0,onClick:W=>S(e.id)},{default:t(()=>[a(F,{activator:"parent",location:"top"},{default:t(()=>[f("Delete")]),_:1}),a(b,{icon:"tabler-trash"})]),_:2},1032,["onClick"])):B("",!0)]}),key:"0"}:void 0]),1032,["items","search"])]}),_:1})]),_:1}))]),_:1})}}};export{Se as default};
