import{_ as I}from"./AppTextField-803105de.js";import{q as M,L as R,a4 as E,s as h,t as f,r as G,a as U,o as c,f as d,e as t,b as a,d as s,E as _,z as o,ag as $,a1 as g,H as k,a2 as z,ac as P,G as n}from"./index-670bda14.js";import{h as j}from"./moment-a9aaa855.js";import{_ as q}from"./Loading-0e8ee1a0.js";import{a as x,V as v}from"./VRow-44af3a5b.js";import{V as F}from"./VCardText-83b6dd60.js";import{V as H}from"./VDataTable-674b624c.js";import{V as b}from"./VTooltip-4a06c0c7.js";import{V as J}from"./VImg-4f1dd734.js";import{V as L}from"./VCard-367227de.js";import"./focus-bfe812d1.js";import"./VTextField-babd124d.js";/* empty css                   */import"./VCounter-40602143.js";import"./VField-eebd85ff.js";import"./easing-9f15041e.js";import"./VInput-28c68c55.js";import"./form-f40ca62b.js";import"./forwardRefs-8348545e.js";import"./VAvatar-eedc1aa8.js";import"./VSelect-80bd1ff2.js";import"./VList-faf63776.js";import"./ssrBoot-587632ee.js";import"./VDivider-964da8ec.js";import"./dialog-transition-a3b422c0.js";import"./VMenu-cbe945a0.js";import"./VOverlay-9bca4c5f.js";import"./lazy-055ec9ba.js";import"./scopeId-78466d19.js";import"./VCheckboxBtn-770097af.js";import"./VSelectionControl-798a6484.js";import"./VChip-c9c9bc7b.js";import"./VTable-3015d60e.js";import"./filter-9f13f1fe.js";const O={class:"d-flex align-center"},Y={class:"d-flex flex-column ms-3"},K={class:"d-block font-weight-medium text-truncate text-high-emphasis"},Q={class:"text-xs"},W={class:"text-xs"},X={class:"text-xs"},Z={class:"text-xs"},ee={class:"text-xs"},Ue={__name:"index",setup(te){const r=M(),y=R(),C=E.useToast();h(()=>document.title="Client - Teams"),h(()=>r.dispatch("GetTeams"));const D=f(()=>r.state.teams.data),w=f(()=>r.state.teams.loading),A=f(()=>r.state.auth.user),p=JSON.parse(A.value.permissions);h(()=>{var l;(l=p.Teams)!=null&&l.includes("ReadTeams")||(alert("You don't have permission to access this resource..."),y.go(-1))});const u=G(""),B=[{title:"Team",key:"team.name"},{title:"Email",key:"team.email"},{title:"Designation",key:"team.designation"},{title:"Phone",key:"team.phone"},{title:"Created At",key:"team.created_at"},{title:"Action",key:"team.delete",sortable:!1}],N=async l=>{if(confirm("Are you sure to delete ?"))try{const i=await r.dispatch("DeleteTeamAction",l);i.status===200&&(C.error(i.message),r.dispatch("GetTeams"))}catch(i){console.log(i)}};return(l,i)=>{const S=I,V=U("IconBtn");return c(),d(v,null,{default:t(()=>[w.value?(c(),d(q,{key:0})):(c(),d(x,{key:1,cols:"12"},{default:t(()=>[a(L,null,{default:t(()=>{var T;return[a(F,{style:{"border-bottom":"thin solid rgba(var(--v-border-color), var(--v-border-opacity))"}},{default:t(()=>[a(v,null,{default:t(()=>[a(x,{cols:"8",md:"8"},{default:t(()=>{var e;return[s("h2",null,[_("Teams "),(e=o(p).Teams)!=null&&e.includes("CreateTeams")?(c(),d($,{key:0,to:"/client/team/create",rounded:"pill",color:"primary",size:"small",class:"ml-5"},{default:t(()=>[a(g,{start:"",icon:"tabler-plus"}),_(" Create ")]),_:1})):k("",!0)])]}),_:1}),a(x,{cols:"4",md:"4"},{default:t(()=>[a(S,{modelValue:o(u),"onUpdate:modelValue":i[0]||(i[0]=e=>z(u)?u.value=e:null),density:"compact",placeholder:"Search ...","append-inner-icon":"tabler-search","single-line":"","hide-details":"",dense:"",outlined:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(o(H),{headers:B,items:D.value,search:o(u),"items-per-page":5,class:"text-no-wrap mb-4"},P({"item.team.name":t(({item:e})=>{var m;return[s("div",O,[s("div",null,[a(J,{src:((m=e.image)==null?void 0:m.length)>0?e.image:"/placeholder.jpg",height:"40",width:"40"},null,8,["src"])]),s("div",Y,[s("span",K,n(e.name),1),s("span",Q,n(e.designation),1)])])]}),"item.team.email":t(({item:e})=>[s("span",W,n(e.email),1)]),"item.team.designation":t(({item:e})=>[s("span",X,n(e.designation),1)]),"item.team.phone":t(({item:e})=>[s("span",Z,n(e.phone),1)]),"item.team.created_at":t(({item:e})=>[s("span",ee,n(o(j)(e==null?void 0:e.created_at).format("DD MMM yyyy, hh:mm A")),1)]),_:2},[(T=o(p).Teams)!=null&&T.includes("UpdateTeams")?{name:"item.team.delete",fn:t(({item:e})=>{var m;return[a(V,{onClick:()=>o(y).push("/client/team/edit/"+e.id)},{default:t(()=>[a(b,{activator:"parent",location:"top"},{default:t(()=>[_("Update")]),_:1}),a(g,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),(m=o(p).Teams)!=null&&m.includes("DeleteTeams")?(c(),d(V,{key:0,onClick:ae=>N(e.id)},{default:t(()=>[a(b,{activator:"parent",location:"top"},{default:t(()=>[_("Delete")]),_:1}),a(g,{icon:"tabler-trash"})]),_:2},1032,["onClick"])):k("",!0)]}),key:"0"}:void 0]),1032,["items","search"])]}),_:1})]),_:1}))]),_:1})}}};export{Ue as default};
