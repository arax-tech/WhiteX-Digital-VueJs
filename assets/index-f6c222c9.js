import{b as te}from"./formatters-9f564f13.js";import{_ as ae}from"./MoreBtn-57636613.js";import{_ as le}from"./AppTextField-e0d36e66.js";import{_ as oe}from"./AppDateTimePicker-1910b6d0.js";import{_ as ne}from"./AppSelect-676dfa2f.js";import{p as ie}from"./paginationMeta-4ad053a4.js";import{u as se}from"./useApi-416eb59d.js";import{c as re}from"./createUrl-b1268007.js";import{$ as ce}from"./api-eafa39b8.js";import{V as w,b as de}from"./VCard-06d56730.js";import{V as S}from"./VCardText-20e2d0ff.js";import{V as q,a as $}from"./VRow-d67d386c.js";import{V as B}from"./VAvatar-7759ad5c.js";import{r as d,t as D,ah as ue,a as G,z as n,o as u,c as g,b as t,e as a,F as H,C as pe,d as i,G as s,a1 as V,f as C,H as me,a2 as m,ag as U,E as p,B as T}from"./index-35d4c811.js";import{V as ve}from"./VSpacer-5f3cb4ca.js";import{V as A}from"./VDivider-4423ace3.js";import{V as fe}from"./VDataTableServer-c018643a.js";import{V as _e}from"./VTooltip-5c041b29.js";import{V as be}from"./VImg-9b04c05e.js";import{V as ge}from"./VChip-5a7d2631.js";import{V as ye}from"./VPagination-d608ae81.js";import"./helpers-61e4df1a.js";import"./VMenu-d6c3699e.js";import"./VOverlay-ec7a9eab.js";import"./easing-9f15041e.js";import"./lazy-4836c696.js";import"./scopeId-d5f41359.js";import"./forwardRefs-8348545e.js";import"./dialog-transition-5411c7b8.js";import"./VList-56d7996c.js";import"./ssrBoot-c2946fb8.js";import"./focus-47cc4c1d.js";import"./VTextField-9bfa6dc1.js";/* empty css                   */import"./VCounter-dcd2da2a.js";import"./VField-4ee07b6e.js";import"./VInput-ff4d0189.js";import"./form-ff0dacbf.js";import"./VSelect-bf5a5be9.js";import"./VCheckboxBtn-d7c7ca98.js";import"./VSelectionControl-4d8986cc.js";import"./index-87919977.js";import"./VDataTable-6d3f6f6a.js";import"./VTable-41351eee.js";import"./filter-85676bf0.js";const Ve={key:0},he={class:"d-flex justify-space-between"},xe={class:"d-flex flex-column gap-y-1"},ke={class:"text-h4 text-high-emphasis"},we={class:"text-body-1 text-capitalize"},De={class:"me-3 d-flex gap-3 align-center"},Pe={class:"d-flex align-center flex-wrap gap-4"},Ie={class:"invoice-list-filter"},Se={class:"invoice-list-filter"},$e={class:"mb-0"},Be={class:"mb-0"},Ce={class:"mb-0"},Ue={class:"d-flex align-center"},Te={key:1},Ae={class:"d-flex flex-column"},ze={class:"text-sm text-disabled"},Ne={key:1,class:"text-base"},Ee={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},Re={class:"text-sm text-disabled mb-0"},Me={key:1},Ut={__name:"index",async setup(Fe){let h,z;const x=d(""),y=d(""),v=d(null),P=d([]),r=d(10),c=d(1),N=d(),E=d(),O=l=>{var o,_;c.value=l.page,N.value=(o=l.sortBy[0])==null?void 0:o.key,E.value=(_=l.sortBy[0])==null?void 0:_.order},R=d([{title:"Clients",value:24,icon:"tabler-user"},{title:"Invoices",value:165,icon:"tabler-file-invoice"},{title:"Paid",value:"$2.46k",icon:"tabler-checks"},{title:"Unpaid",value:"$876",icon:"tabler-currency-dollar-off"}]),Q=[{title:"#ID",key:"id"},{title:"Trending",key:"trending",sortable:!1},{title:"Client",key:"client"},{title:"Total",key:"total"},{title:"Issued Date",key:"date"},{title:"Balance",key:"balance"},{title:"Actions",key:"actions",sortable:!1}],J=D(()=>{const[l,o]=y.value?y.value.split("to"):"";return{start:l,end:o}}),{data:M,execute:K}=([h,z]=ue(()=>se(re("/apps/invoice",{query:{q:x,status:v,selectedDateRange:J,itemsPerPage:r,page:c,sortBy:N,orderBy:E}}))),h=await h,z(),h),F=D(()=>M.value.invoices),k=D(()=>M.value.totalInvoices),f=(l,o)=>l===o?{status:"Unpaid",chip:{color:"error"}}:l===0?{status:"Paid",chip:{color:"success"}}:{status:l,chip:{variant:"text"}},I=l=>l==="Partial Payment"?{variant:"success",icon:"tabler-circle-half-2"}:l==="Paid"?{variant:"warning",icon:"tabler-chart-pie"}:l==="Downloaded"?{variant:"info",icon:"tabler-arrow-down-circle"}:l==="Draft"?{variant:"primary",icon:"tabler-device-floppy"}:l==="Sent"?{variant:"secondary",icon:"tabler-circle-check"}:l==="Past Due"?{variant:"error",icon:"tabler-alert-circle"}:{variant:"secondary",icon:"tabler-x"},W=D(()=>l=>[{title:"Download",value:"download",prependIcon:"tabler-download"},{title:"Edit",value:"edit",prependIcon:"tabler-pencil",to:{name:"apps-invoice-edit-id",params:{id:l}}},{title:"Duplicate",value:"duplicate",prependIcon:"tabler-layers-intersect"}]),X=async l=>{await ce(`/apps/invoice/${l}`,{method:"DELETE"}),K()};return(l,o)=>{const _=ne,Y=oe,Z=le,L=G("RouterLink"),j=G("IconBtn"),ee=ae;return n(F)?(u(),g("section",Ve,[t(w,{class:"mb-6"},{default:a(()=>[t(S,null,{default:a(()=>[t(q,null,{default:a(()=>[(u(!0),g(H,null,pe(n(R),(e,b)=>(u(),g(H,{key:b},[t($,{cols:"12",sm:"6",md:"3",class:"px-6"},{default:a(()=>[i("div",he,[i("div",xe,[i("h4",ke,s(e.value),1),i("div",we,s(e.title),1)]),t(B,{color:"rgba(var(--v-theme-on-background), var(--v-hover-opacity))",rounded:"",class:"text-high-emphasis",size:"38"},{default:a(()=>[t(V,{icon:e.icon,size:"26"},null,8,["icon"])]),_:2},1024)])]),_:2},1024),(l.$vuetify.display.mdAndUp?b!==n(R).length-1:l.$vuetify.display.smAndUp&&b%2===0)?(u(),C(A,{key:0,vertical:"",inset:""})):me("",!0)],64))),128))]),_:1})]),_:1})]),_:1}),t(w,{title:"Filters",class:"mb-6"},{default:a(()=>[t(S,null,{default:a(()=>[t(q,null,{default:a(()=>[t($,{cols:"12",md:"6"},{default:a(()=>[t(_,{modelValue:n(v),"onUpdate:modelValue":o[0]||(o[0]=e=>m(v)?v.value=e:null),label:"Select Status",placeholder:"Select Status",clearable:"","clear-icon":"tabler-x",items:["Downloaded","Draft","Sent","Paid","Partial Payment","Past Due"]},null,8,["modelValue"])]),_:1}),t($,{cols:"12",md:"6"},{default:a(()=>[t(Y,{modelValue:n(y),"onUpdate:modelValue":o[1]||(o[1]=e=>m(y)?y.value=e:null),label:"Invoice Date","clear-icon":"tabler-x",clearable:"",config:{mode:"range"},placeholder:"Select Date"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(w,{id:"invoice-list"},{default:a(()=>[t(S,{class:"d-flex align-center flex-wrap gap-4"},{default:a(()=>[i("div",De,[t(_,{"model-value":n(r),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"},"onUpdate:modelValue":o[2]||(o[2]=e=>r.value=parseInt(e,10))},null,8,["model-value"]),t(U,{"prepend-icon":"tabler-plus",to:{name:"apps-invoice-add"}},{default:a(()=>[p(" Create invoice ")]),_:1})]),t(ve),i("div",Pe,[i("div",Ie,[t(Z,{modelValue:n(x),"onUpdate:modelValue":o[3]||(o[3]=e=>m(x)?x.value=e:null),placeholder:"Search Invoice",density:"compact"},null,8,["modelValue"])]),i("div",Se,[t(_,{modelValue:n(v),"onUpdate:modelValue":o[4]||(o[4]=e=>m(v)?v.value=e:null),placeholder:"Select Status",clearable:"","clear-icon":"tabler-x","single-line":"",items:["Downloaded","Draft","Sent","Paid","Partial Payment","Past Due"]},null,8,["modelValue"])])])]),_:1}),t(A),t(n(fe),{modelValue:n(P),"onUpdate:modelValue":o[6]||(o[6]=e=>m(P)?P.value=e:null),"items-per-page":n(r),"onUpdate:itemsPerPage":o[7]||(o[7]=e=>m(r)?r.value=e:null),page:n(c),"onUpdate:page":o[8]||(o[8]=e=>m(c)?c.value=e:null),"show-select":"","items-length":n(k),headers:Q,items:n(F),class:"text-no-wrap","onUpdate:options":O},{"column.trending":a(()=>[t(V,{size:"22",icon:"tabler-trending-up"})]),"item.id":a(({item:e})=>[t(L,{to:{name:"apps-invoice-preview-id",params:{id:e.id}}},{default:a(()=>[p(" #"+s(e.id),1)]),_:2},1032,["to"])]),"item.trending":a(({item:e})=>[t(_e,null,{activator:a(({props:b})=>[t(B,T({size:30},b,{color:I(e.invoiceStatus).variant,variant:"tonal"}),{default:a(()=>[t(V,{size:20,icon:I(e.invoiceStatus).icon},null,8,["icon"])]),_:2},1040,["color"])]),default:a(()=>[i("p",$e,s(e.invoiceStatus),1),i("p",Be," Balance: "+s(e.balance),1),i("p",Ce," Due date: "+s(e.dueDate),1)]),_:2},1024)]),"item.client":a(({item:e})=>[i("div",Ue,[t(B,{size:"38",color:e.avatar.length?void 0:I(e.invoiceStatus).variant,variant:e.avatar.length?void 0:"tonal",class:"me-3"},{default:a(()=>[e.avatar.length?(u(),C(be,{key:0,src:e.avatar},null,8,["src"])):(u(),g("span",Te,s(("avatarText"in l?l.avatarText:n(te))(e.client.name)),1))]),_:2},1032,["color","variant"]),i("div",Ae,[t(L,{to:{name:"pages-user-profile-tab",params:{tab:"profile"}},class:"text-link font-weight-medium"},{default:a(()=>[p(s(e.client.name),1)]),_:2},1024),i("span",ze,s(e.client.companyEmail),1)])])]),"item.total":a(({item:e})=>[p(" $"+s(e.total),1)]),"item.date":a(({item:e})=>[p(s(e.issuedDate),1)]),"item.balance":a(({item:e})=>[typeof f(e.balance,e.total).status=="string"?(u(),C(ge,{key:0,color:f(e.balance,e.total).chip.color,label:""},{default:a(()=>[p(s(f(e.balance,e.total).status),1)]),_:2},1032,["color"])):(u(),g("span",Ne,s(Number(f(e.balance,e.total).status)>0?`$${f(e.balance,e.total).status}`:`-$${Math.abs(Number(f(e.balance,e.total).status))}`),1))]),"item.actions":a(({item:e})=>[t(j,{onClick:b=>X(e.id)},{default:a(()=>[t(V,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),t(j,{to:{name:"apps-invoice-preview-id",params:{id:e.id}}},{default:a(()=>[t(V,{icon:"tabler-eye"})]),_:2},1032,["to"]),t(ee,{"menu-list":n(W)(e.id),"item-props":"",color:"undefined"},null,8,["menu-list"])]),bottom:a(()=>[t(A),i("div",Ee,[i("p",Re,s(n(ie)({page:n(c),itemsPerPage:n(r)},n(k))),1),t(ye,{modelValue:n(c),"onUpdate:modelValue":o[5]||(o[5]=e=>m(c)?c.value=e:null),length:Math.ceil(n(k)/n(r)),"total-visible":l.$vuetify.display.xs?1:Math.ceil(n(k)/n(r))},{prev:a(e=>[t(U,T({variant:"tonal",color:"default"},e,{icon:!1}),{default:a(()=>[p(" Previous ")]),_:2},1040)]),next:a(e=>[t(U,T({variant:"tonal",color:"default"},e,{icon:!1}),{default:a(()=>[p(" Next ")]),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),_:1},8,["modelValue","items-per-page","page","items-length","items"])]),_:1})])):(u(),g("section",Me,[t(w,null,{default:a(()=>[t(de,null,{default:a(()=>[p("No Invoice Found")]),_:1})]),_:1})]))}}};export{Ut as default};
