import{_ as L}from"./DialogCloseBtn-6889b27a.js";import{_ as Y}from"./Loading-2eec0421.js";import{h as x}from"./moment-a9aaa855.js";import{q as j,a4 as K,L as Q,s as D,t as C,r as M,a as X,o as c,f as p,e as l,b as a,z as n,d as e,G as d,E as m,H as S,a1 as N,a2 as T,c as v}from"./index-c4e71550.js";import{a as r,V as f}from"./VRow-3a397f81.js";import{V as P}from"./VCardText-6669d6f5.js";import{V as Z}from"./VDataTable-145871c8.js";import{V}from"./VChip-a642ea45.js";import{V as I}from"./VTooltip-a22fc0c5.js";import{V as tt}from"./VDialog-91d5bf8a.js";import{V as $}from"./VCard-71b3ac17.js";import{V as et,a as A}from"./VTabs-c4af68e7.js";import{V as lt,a as O}from"./VWindowItem-ce604431.js";import"./VAvatar-0d338c12.js";import"./VImg-8451f417.js";import"./VSelect-9628140b.js";import"./VTextField-47e6f93c.js";/* empty css                   */import"./VCounter-856e1893.js";import"./VField-0f4003e5.js";import"./focus-ba6d54b4.js";import"./easing-9f15041e.js";import"./VInput-6532c874.js";import"./form-d2acef44.js";import"./forwardRefs-8348545e.js";import"./VList-48b3771d.js";import"./ssrBoot-3f554f90.js";import"./VDivider-aef533a2.js";import"./dialog-transition-1a37cbb8.js";import"./VMenu-3432c545.js";import"./VOverlay-14a99b98.js";import"./lazy-8c4021f0.js";import"./scopeId-203eb21d.js";import"./VCheckboxBtn-5dd1ee23.js";import"./VSelectionControl-9181ec5a.js";import"./VTable-28a89234.js";import"./filter-c3387b54.js";import"./VSlideGroup-c5a070c6.js";const st=e("h2",null,"Subscription",-1),ot={class:"text-xs"},at={class:"text-xs"},nt={class:"text-xs"},it={class:"text-xs"},dt={class:"text-xs"},rt={class:"text-xs"},ct={style:{"margin-top":"10px"}},_t=e("label",{class:"text-h6 text-overline mb-1 font-weight-bolder"},"Subscription",-1),ut=e("br",null,null,-1),bt={class:"mb-1"},pt=e("label",{class:"text-h6 text-overline mb-1 font-weight-bolder"},"Item ",-1),mt=e("br",null,null,-1),ht={class:"mb-1"},ft=e("label",{class:"text-h6 text-overline mb-1 font-weight-bolder"},"Total ",-1),gt=e("br",null,null,-1),xt={class:"mb-1"},yt=e("label",{class:"text-h6 text-overline mb-1 font-weight-bolder"},"Start Date",-1),vt=e("br",null,null,-1),Vt={class:"mb-1"},kt=e("label",{class:"text-h6 text-overline mb-1 font-weight-bolder"},"Next Payment ",-1),wt=e("br",null,null,-1),Dt={class:"mb-1"},Ct=e("label",{class:"text-h6 text-overline mb-1 font-weight-bolder"},"End Date ",-1),Mt=e("br",null,null,-1),St={class:"mb-1"},Tt=e("label",{class:"text-h6 text-overline mb-1 font-weight-bolder"},"Status",-1),Et=e("br",null,null,-1),Bt={key:0,style:{padding:"2px 10px"},class:"rounded bg-secondary"},Nt={key:1,style:{padding:"2px 10px"},class:"rounded bg-info"},Pt={key:2,style:{padding:"2px 10px"},class:"rounded bg-warning"},It={key:3,style:{padding:"2px 10px"},class:"rounded bg-success"},$t={key:4,style:{padding:"2px 10px","background-color":"#c72c2c",color:"#fff"},class:"rounded bg-red"},At=e("label",{class:"text-h6 text-overline mb-1 font-weight-bolder"},"Full Name",-1),Ot=e("br",null,null,-1),Rt={class:"mb-1"},Ut=e("label",{class:"text-h6 text-overline mb-1 font-weight-bolder"},"Company ",-1),Ht=e("br",null,null,-1),Ft={class:"mb-1"},Gt=e("label",{class:"text-h6 text-overline mb-1 font-weight-bolder"},"Email ",-1),Wt=e("br",null,null,-1),qt={class:"mb-1"},zt=e("label",{class:"text-h6 text-overline mb-1 font-weight-bolder"},"Phone ",-1),Jt=e("br",null,null,-1),Lt={class:"mb-1"},Yt=e("label",{class:"text-h6 text-overline mb-1 font-weight-bolder"},"City ",-1),jt=e("br",null,null,-1),Kt={class:"mb-1"},Qt=e("label",{class:"text-h6 text-overline mb-1 font-weight-bolder"},"State ",-1),Xt=e("br",null,null,-1),Zt={class:"mb-1"},te=e("label",{class:"text-h6 text-overline mb-1 font-weight-bolder"},"Country ",-1),ee=e("br",null,null,-1),le={class:"mb-1"},se=e("label",{class:"text-h6 text-overline mb-1 font-weight-bolder"},"Post Code ",-1),oe=e("br",null,null,-1),ae={class:"mb-1"},ne=e("label",{class:"text-h6 text-overline mb-1 font-weight-bolder"},"Full Address ",-1),ie=e("br",null,null,-1),de={class:"mb-1"},Ye={__name:"index",setup(re){const k=j();K.useToast();const R=Q();D(()=>document.title="Client - Subscription"),D(()=>{w.value&&w.value.customer_id&&k.dispatch("GetSubscription",w.value.customer_id)});const w=C(()=>k.state.auth.user),U=JSON.parse(w.value.permissions);D(()=>{var u;(u=U.Subscription)!=null&&u.includes("ReadSubscription")||(alert("You don't have permission to access this resource..."),R.go(-1))});const H=C(()=>k.state.subscription.loading),F=C(()=>k.state.subscription.data),y=M(!1),G=[{title:"Subscription",key:"subscription.subscription"},{title:"Item",key:"subscription.items"},{title:"Total",key:"subscription.total"},{title:"Start Date",key:"subscription.start_date"},{title:"Next Payment",key:"subscription.next_payment"},{title:"End Date",key:"subscription.end_date"},{title:"Status",key:"subscription.status"},{title:"Action",key:"subscription.action",sortable:!1}],i=M(null),W=u=>{var b;y.value=!0,i.value=u,plan_id.value=(b=u==null?void 0:u.line_items[0])==null?void 0:b.name},q=()=>{y.value=!1,i.value=null},z=u=>{window.open(u,"_blank")},g=M("Tab1");return(u,b)=>{const E=X("IconBtn"),J=L;return c(),p(f,null,{default:l(()=>[H.value?(c(),p(Y,{key:0})):(c(),p(r,{key:1,cols:"12"},{default:l(()=>[a($,null,{default:l(()=>[a(P,{style:{"border-bottom":"thin solid rgba(var(--v-border-color), var(--v-border-opacity))"}},{default:l(()=>[a(f,null,{default:l(()=>[a(r,{cols:"12",md:"12"},{default:l(()=>[st]),_:1})]),_:1})]),_:1}),a(n(Z),{headers:G,items:[F.value],"items-per-page":5,class:"text-no-wrap mb-4"},{"item.subscription.subscription":l(({item:s})=>{var t,o;return[e("span",ot,d(s==null?void 0:s.id)+" for "+d((t=s==null?void 0:s.billing)==null?void 0:t.first_name)+" "+d((o=s==null?void 0:s.billing)==null?void 0:o.last_name),1)]}),"item.subscription.items":l(({item:s})=>{var t;return[e("span",at,d((t=s==null?void 0:s.line_items[0])==null?void 0:t.name),1)]}),"item.subscription.total":l(({item:s})=>{var t;return[e("span",nt,d((t=s==null?void 0:s.line_items[0])==null?void 0:t.subtotal)+" / "+d(s==null?void 0:s.billing_period),1)]}),"item.subscription.start_date":l(({item:s})=>[e("span",it,d(s!=null&&s.start_date_gmt?n(x)(s==null?void 0:s.start_date_gmt).format("DD MMM yyyy"):"-"),1)]),"item.subscription.next_payment":l(({item:s})=>[e("span",dt,d(s!=null&&s.end_date_gmt?n(x)(s==null?void 0:s.end_date_gmt).format("DD MMM yyyy"):"-"),1)]),"item.subscription.end_date":l(({item:s})=>[e("span",rt,d(s!=null&&s.end_date_gmt?n(x)(s==null?void 0:s.end_date_gmt).format("DD MMM yyyy"):"-"),1)]),"item.subscription.status":l(({item:s})=>[s.status==="pending-cancel"?(c(),p(V,{key:0,color:"secondary"},{default:l(()=>[m("Pending Cancel")]),_:1})):s.status==="expired"?(c(),p(V,{key:1,color:"info"},{default:l(()=>[m("Expired")]),_:1})):s.status==="on-hold"?(c(),p(V,{key:2,color:"warning"},{default:l(()=>[m("On Hold")]),_:1})):s.status==="active"?(c(),p(V,{key:3,color:"success"},{default:l(()=>[m("Active")]),_:1})):s.status==="cancelled"?(c(),p(V,{key:4,color:"error"},{default:l(()=>[m("Cancelled")]),_:1})):S("",!0)]),"item.subscription.action":l(({item:s})=>[a(E,{onClick:t=>W(s)},{default:l(()=>[a(I,{activator:"parent",location:"top"},{default:l(()=>[m("View Subscription Details")]),_:1}),a(N,{icon:"tabler-eye"})]),_:2},1032,["onClick"]),a(E,{onClick:t=>{var o;return z("https://whitexdigital.com/product/"+((o=s==null?void 0:s.line_items[0])==null?void 0:o.product_id))}},{default:l(()=>[a(I,{activator:"parent",location:"top"},{default:l(()=>[m("View Package")]),_:1}),a(N,{icon:"tabler-id"})]),_:2},1032,["onClick"]),n(i)?(c(),p(tt,{key:0,modelValue:n(y),"onUpdate:modelValue":b[2]||(b[2]=t=>T(y)?y.value=t:null),width:"1000"},{default:l(()=>[a(J,{onClick:q}),a($,{title:"Subscription Details"},{default:l(()=>[e("div",ct,[a(et,{modelValue:n(g),"onUpdate:modelValue":b[0]||(b[0]=t=>T(g)?g.value=t:null)},{default:l(()=>[a(A,null,{default:l(()=>[m("Details")]),_:1}),a(A,null,{default:l(()=>[m("Billing Info")]),_:1})]),_:1},8,["modelValue"]),a(P,null,{default:l(()=>[a(lt,{modelValue:n(g),"onUpdate:modelValue":b[1]||(b[1]=t=>T(g)?g.value=t:null)},{default:l(()=>[a(O,{value:"Tab1"},{default:l(()=>[a(f,null,{default:l(()=>[a(r,{cols:"4"},{default:l(()=>{var t,o,_,h,B;return[_t,ut,e("label",bt,"#"+d((t=n(i))==null?void 0:t.id)+" for "+d(`${(_=(o=n(i))==null?void 0:o.user)==null?void 0:_.first_name}
                                                            ${(B=(h=n(i))==null?void 0:h.user)==null?void 0:B.last_name}`),1)]}),_:1}),a(r,{cols:"4"},{default:l(()=>{var t,o;return[pt,mt,e("label",ht,d((o=(t=n(i))==null?void 0:t.line_items[0])==null?void 0:o.name),1)]}),_:1}),a(r,{cols:"4"},{default:l(()=>{var t,o,_;return[ft,gt,e("label",xt,d((o=(t=n(i))==null?void 0:t.line_items[0])==null?void 0:o.subtotal)+" / "+d((_=n(i))==null?void 0:_.billing_period),1)]}),_:1})]),_:1}),a(f,null,{default:l(()=>[a(r,{cols:"4"},{default:l(()=>{var t,o;return[yt,vt,e("label",Vt,d((t=n(i))!=null&&t.start_date_gmt?n(x)((o=n(i))==null?void 0:o.start_date_gmt).format("DD MMM yyyy"):"-"),1)]}),_:1}),a(r,{cols:"4"},{default:l(()=>{var t,o;return[kt,wt,e("label",Dt,d((t=n(i))!=null&&t.end_date_gmt?n(x)((o=n(i))==null?void 0:o.end_date_gmt).format("DD MMM yyyy"):"-"),1)]}),_:1}),a(r,{cols:"4"},{default:l(()=>{var t,o;return[Ct,Mt,e("label",St,d((t=n(i))!=null&&t.end_date_gmt?n(x)((o=n(i))==null?void 0:o.end_date_gmt).format("DD MMM yyyy"):"-"),1)]}),_:1})]),_:1}),a(f,null,{default:l(()=>[a(r,{cols:"12"},{default:l(()=>[Tt,Et,n(i).status==="pending-cancel"?(c(),v("span",Bt,"Pending Cancel")):n(i).status==="expired"?(c(),v("span",Nt,"Expired")):n(i).status==="on-hold"?(c(),v("span",Pt,"On Hold")):n(i).status==="active"?(c(),v("span",It,"Active")):n(i).status==="cancelled"?(c(),v("span",$t,"Cancelled")):S("",!0)]),_:1})]),_:1})]),_:1}),a(O,{value:"Tab2"},{default:l(()=>[a(f,null,{default:l(()=>[a(r,{cols:"4"},{default:l(()=>{var t,o,_,h;return[At,Ot,e("label",Rt,d((o=(t=n(i))==null?void 0:t.billing)==null?void 0:o.first_name)+" "+d((h=(_=n(i))==null?void 0:_.billing)==null?void 0:h.last_name),1)]}),_:1}),a(r,{cols:"4"},{default:l(()=>{var t,o;return[Ut,Ht,e("label",Ft,d((o=(t=n(i))==null?void 0:t.billing)==null?void 0:o.company),1)]}),_:1}),a(r,{cols:"4"},{default:l(()=>{var t,o;return[Gt,Wt,e("label",qt,d((o=(t=n(i))==null?void 0:t.billing)==null?void 0:o.email),1)]}),_:1})]),_:1}),a(f,null,{default:l(()=>[a(r,{cols:"4"},{default:l(()=>{var t,o;return[zt,Jt,e("label",Lt,d((o=(t=n(i))==null?void 0:t.billing)==null?void 0:o.phone),1)]}),_:1}),a(r,{cols:"4"},{default:l(()=>{var t,o;return[Yt,jt,e("label",Kt,d((o=(t=n(i))==null?void 0:t.billing)==null?void 0:o.city),1)]}),_:1}),a(r,{cols:"4"},{default:l(()=>{var t,o;return[Qt,Xt,e("label",Zt,d((o=(t=n(i))==null?void 0:t.billing)==null?void 0:o.state),1)]}),_:1})]),_:1}),a(f,null,{default:l(()=>[a(r,{cols:"4"},{default:l(()=>{var t,o;return[te,ee,e("label",le,d((o=(t=n(i))==null?void 0:t.billing)==null?void 0:o.country),1)]}),_:1}),a(r,{cols:"4"},{default:l(()=>{var t,o;return[se,oe,e("label",ae,d((o=(t=n(i))==null?void 0:t.billing)==null?void 0:o.postcode),1)]}),_:1}),a(r,{cols:"4"},{default:l(()=>{var t,o,_,h;return[ne,ie,e("label",de,d((o=(t=n(i))==null?void 0:t.billing)==null?void 0:o.address_1)+", "+d((h=(_=n(i))==null?void 0:_.billing)==null?void 0:h.address_2),1)]}),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1},8,["modelValue"])):S("",!0)]),_:1},8,["items"])]),_:1})]),_:1}))]),_:1})}}};export{Ye as default};
