import{_ as I}from"./AppTextField-e0d36e66.js";import{q as M,L as S,a4 as E,s as h,t as f,r as G,a as U,o as l,f as r,e as t,b as o,d as s,E as _,z as a,ag as $,a1 as C,H as y,a2 as z,G as c}from"./index-35d4c811.js";import{h as P}from"./moment-a9aaa855.js";import{_ as j}from"./Loading-891177bd.js";import{a as x,V as v}from"./VRow-d67d386c.js";import{V as q}from"./VCardText-20e2d0ff.js";import{V as F}from"./VDataTable-6d3f6f6a.js";import{V as H}from"./VImg-9b04c05e.js";import{V as b}from"./VTooltip-5c041b29.js";import{V as J}from"./VCard-06d56730.js";import"./focus-47cc4c1d.js";import"./VTextField-9bfa6dc1.js";/* empty css                   */import"./VCounter-dcd2da2a.js";import"./VField-4ee07b6e.js";import"./easing-9f15041e.js";import"./VInput-ff4d0189.js";import"./form-ff0dacbf.js";import"./forwardRefs-8348545e.js";import"./VAvatar-7759ad5c.js";import"./VSelect-bf5a5be9.js";import"./VList-56d7996c.js";import"./ssrBoot-c2946fb8.js";import"./VDivider-4423ace3.js";import"./dialog-transition-5411c7b8.js";import"./VMenu-d6c3699e.js";import"./VOverlay-ec7a9eab.js";import"./lazy-4836c696.js";import"./scopeId-d5f41359.js";import"./VCheckboxBtn-d7c7ca98.js";import"./VSelectionControl-4d8986cc.js";import"./VChip-5a7d2631.js";import"./VTable-41351eee.js";import"./filter-85676bf0.js";const L={class:"d-flex align-center"},O={class:"d-flex flex-column ms-3"},Y={class:"d-block font-weight-medium text-truncate text-high-emphasis"},K={class:"text-xs"},Q={class:"text-xs"},W={class:"text-xs"},X={class:"text-xs"},Z={class:"text-xs"},Ge={__name:"index",setup(ee){const n=M(),V=S(),D=E.useToast();h(()=>document.title="Admin - Clients"),h(()=>n.dispatch("GetClients"));const A=f(()=>n.state.clients.clients),w=f(()=>n.state.clients.loading),B=f(()=>n.state.auth.user),p=JSON.parse(B.value.permissions);h(()=>{var m;(m=p.Client)!=null&&m.includes("ReadClient")||(alert("You don't have permission to access this resource..."),V.go(-1))});const u=G(""),N=[{title:"Client",key:"client.name"},{title:"Email",key:"client.email"},{title:"Company Name",key:"client.company_name"},{title:"Phone",key:"client.phone"},{title:"Register At",key:"client.created_at"},{title:"Action",key:"client.delete",sortable:!1}],T=async m=>{if(confirm("Are you sure to delete ?"))try{const i=await n.dispatch("DeleteClientAction",m);i.status===200&&(D.error(i.message),n.dispatch("GetClients"))}catch(i){console.log(i)}};return(m,i)=>{const R=I,g=U("IconBtn");return l(),r(v,null,{default:t(()=>[w.value?(l(),r(j,{key:0})):(l(),r(x,{key:1,cols:"12"},{default:t(()=>[o(J,null,{default:t(()=>[o(q,{style:{"border-bottom":"thin solid rgba(var(--v-border-color), var(--v-border-opacity))"}},{default:t(()=>[o(v,null,{default:t(()=>[o(x,{cols:"8",md:"8"},{default:t(()=>{var e;return[s("h2",null,[_("Clients "),(e=a(p).Client)!=null&&e.includes("CreateClient")?(l(),r($,{key:0,to:"/admin/client/create",rounded:"pill",color:"primary",size:"small",class:"ml-5"},{default:t(()=>[o(C,{start:"",icon:"tabler-plus"}),_(" Create ")]),_:1})):y("",!0)])]}),_:1}),o(x,{cols:"4",md:"4"},{default:t(()=>[o(R,{modelValue:a(u),"onUpdate:modelValue":i[0]||(i[0]=e=>z(u)?u.value=e:null),density:"compact",placeholder:"Search ...","append-inner-icon":"tabler-search","single-line":"","hide-details":"",dense:"",outlined:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),o(a(F),{headers:N,items:A.value,search:a(u),"items-per-page":5,class:"text-no-wrap mb-4"},{"item.client.name":t(({item:e})=>{var d;return[s("div",L,[s("div",null,[o(H,{src:((d=e.image)==null?void 0:d.length)>0?e.image:"/placeholder.jpg",height:"40",width:"40"},null,8,["src"])]),s("div",O,[s("span",Y,c(e.name),1),s("span",K,c(e.designation),1)])])]}),"item.client.email":t(({item:e})=>[s("span",Q,c(e.email),1)]),"item.client.company_name":t(({item:e})=>[s("span",W,c(e.company_name),1)]),"item.client.phone":t(({item:e})=>[s("span",X,c(e.phone),1)]),"item.client.created_at":t(({item:e})=>[s("span",Z,c(a(P)(e==null?void 0:e.created_at).format("DD MMM yyyy, hh:mm A")),1)]),"item.client.delete":t(({item:e})=>{var d,k;return[(d=a(p).Client)!=null&&d.includes("UpdateClient")?(l(),r(g,{key:0,onClick:()=>a(V).push("/admin/client/edit/"+e.id)},{default:t(()=>[o(b,{activator:"parent",location:"top"},{default:t(()=>[_("Update")]),_:1}),o(C,{icon:"tabler-edit"})]),_:2},1032,["onClick"])):y("",!0),(k=a(p).Client)!=null&&k.includes("DeleteClient")?(l(),r(g,{key:1,onClick:te=>T(e.id)},{default:t(()=>[o(b,{activator:"parent",location:"top"},{default:t(()=>[_("Delete")]),_:1}),o(C,{icon:"tabler-trash"})]),_:2},1032,["onClick"])):y("",!0)]}),_:1},8,["items","search"])]),_:1})]),_:1}))]),_:1})}}};export{Ge as default};
