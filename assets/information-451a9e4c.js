import{r as t}from"./validators-dea6e3a5.js";import{q as M,a4 as R,L as h,s as S,t as f,a0 as $,r as A,o as c,f as b,e as d,b as a,D as z,z as r,ag as J,E as O,G as Y,d as j}from"./index-c4e71550.js";import{_ as H}from"./AppTextField-a8f30c8f.js";import{_ as K}from"./Loading-2eec0421.js";import{a as n,V as v}from"./VRow-3a397f81.js";import{V as k}from"./VCardText-6669d6f5.js";import{V as Q}from"./VDivider-aef533a2.js";import{V as W}from"./VForm-617abc97.js";import{V as X}from"./VCard-71b3ac17.js";import"./helpers-61e4df1a.js";import"./focus-ba6d54b4.js";import"./VTextField-47e6f93c.js";/* empty css                   */import"./VCounter-856e1893.js";import"./VImg-8451f417.js";import"./VField-0f4003e5.js";import"./easing-9f15041e.js";import"./VInput-6532c874.js";import"./form-d2acef44.js";import"./forwardRefs-8348545e.js";import"./VAvatar-0d338c12.js";const Z=j("h2",null,"Update Billing Information",-1),_e={__name:"information",setup(x){const u=M(),P=R.useToast(),w=h();S(()=>document.title="Client - Billing");const p=f(()=>u.state.auth.user),E=JSON.parse(p.value.permissions);S(()=>{var e;(e=E.BillingInformation)!=null&&e.includes("ReadBillingInformation")||(alert("You don't have permission to access this resource..."),w.go(-1))}),$(async()=>{p.value&&p.value.customer_id&&u.dispatch("GetClientBilling",p.value.customer_id),T()});const V=f(()=>u.state.clientBilling.loading),I=f(()=>u.state.clientBilling.data),T=()=>{var o,s,i,y,_,g,q,U,B,C,N;const e=I.value;e&&(l.value.first_name=(o=e==null?void 0:e.billing)==null?void 0:o.first_name,l.value.last_name=(s=e==null?void 0:e.billing)==null?void 0:s.last_name,l.value.email=(i=e==null?void 0:e.billing)==null?void 0:i.email,l.value.phone=(y=e==null?void 0:e.billing)==null?void 0:y.phone,l.value.company=(_=e==null?void 0:e.billing)==null?void 0:_.company,l.value.city=(g=e==null?void 0:e.billing)==null?void 0:g.city,l.value.state=(q=e==null?void 0:e.billing)==null?void 0:q.state,l.value.country=(U=e==null?void 0:e.billing)==null?void 0:U.country,l.value.address_1=(B=e==null?void 0:e.billing)==null?void 0:B.address_1,l.value.address_2=(C=e==null?void 0:e.billing)==null?void 0:C.address_2,l.value.postcode=(N=e==null?void 0:e.billing)==null?void 0:N.postcode)},m=A(),l=A({first_name:"",last_name:"",email:"",phone:"",company:"",city:"",state:"",country:"",address_1:"",address_2:"",postcode:""}),G=()=>{var e;(e=m==null?void 0:m.value)==null||e.validate().then(({valid:o})=>{o&&L()})},L=async()=>{const e={address_1:l.value.address_1,address_2:l.value.address_2,city:l.value.city,company:l.value.company,country:l.value.country,email:l.value.email,first_name:l.value.first_name,last_name:l.value.last_name,phone:l.value.phone,state:l.value.state,postcode:l.value.postcode};try{const{data:o,status:s}=await u.dispatch("UpdateBillingAction",{customer_id:p.value.customer_id,billing:e});console.log(o),s===200&&(P.success("Billing Info Update Successfully..."),u.dispatch("GetClientBilling",p.value.customer_id))}catch(o){console.error(o)}};return(e,o)=>{const s=H;return c(),b(v,null,{default:d(()=>[V.value?(c(),b(K,{key:0})):(c(),b(n,{key:1,cols:"12"},{default:d(()=>[a(X,null,{default:d(()=>[a(k,null,{default:d(()=>[a(v,null,{default:d(()=>[a(n,{cols:"12",md:"12"},{default:d(()=>[Z]),_:1})]),_:1})]),_:1}),a(Q),a(k,{class:"pt-0"},{default:d(()=>[a(W,{class:"mt-6",ref_key:"refForm",ref:m,onSubmit:z(G,["prevent"])},{default:d(()=>[a(v,null,{default:d(()=>[a(n,{md:"3",cols:"12"},{default:d(()=>[a(s,{"prepend-inner-icon":"tabler-user",modelValue:r(l).first_name,"onUpdate:modelValue":o[0]||(o[0]=i=>r(l).first_name=i),placeholder:"First Name","persistent-placeholder":"",label:"First Name",rules:["requiredValidator"in e?e.requiredValidator:r(t)]},null,8,["modelValue","rules"])]),_:1}),a(n,{md:"3",cols:"12"},{default:d(()=>[a(s,{"prepend-inner-icon":"tabler-user",modelValue:r(l).last_name,"onUpdate:modelValue":o[1]||(o[1]=i=>r(l).last_name=i),placeholder:"Last Name","persistent-placeholder":"",label:"Last Name",rules:["requiredValidator"in e?e.requiredValidator:r(t)]},null,8,["modelValue","rules"])]),_:1}),a(n,{md:"3",cols:"12"},{default:d(()=>[a(s,{"prepend-inner-icon":"tabler-mail",modelValue:r(l).email,"onUpdate:modelValue":o[2]||(o[2]=i=>r(l).email=i),placeholder:"Email","persistent-placeholder":"",label:"Email",rules:["requiredValidator"in e?e.requiredValidator:r(t)]},null,8,["modelValue","rules"])]),_:1}),a(n,{md:"3",cols:"12"},{default:d(()=>[a(s,{"prepend-inner-icon":"tabler-phone",modelValue:r(l).phone,"onUpdate:modelValue":o[3]||(o[3]=i=>r(l).phone=i),placeholder:"Phone","persistent-placeholder":"",label:"Phone",rules:["requiredValidator"in e?e.requiredValidator:r(t)]},null,8,["modelValue","rules"])]),_:1}),a(n,{md:"3",cols:"12"},{default:d(()=>[a(s,{"prepend-inner-icon":"tabler-id",modelValue:r(l).company,"onUpdate:modelValue":o[4]||(o[4]=i=>r(l).company=i),placeholder:"Company","persistent-placeholder":"",label:"Company",rules:["requiredValidator"in e?e.requiredValidator:r(t)]},null,8,["modelValue","rules"])]),_:1}),a(n,{md:"3",cols:"12"},{default:d(()=>[a(s,{"prepend-inner-icon":"tabler-map",modelValue:r(l).city,"onUpdate:modelValue":o[5]||(o[5]=i=>r(l).city=i),placeholder:"City","persistent-placeholder":"",label:"City",rules:["requiredValidator"in e?e.requiredValidator:r(t)]},null,8,["modelValue","rules"])]),_:1}),a(n,{md:"3",cols:"12"},{default:d(()=>[a(s,{"prepend-inner-icon":"tabler-map",modelValue:r(l).state,"onUpdate:modelValue":o[6]||(o[6]=i=>r(l).state=i),placeholder:"State","persistent-placeholder":"",label:"State",rules:["requiredValidator"in e?e.requiredValidator:r(t)]},null,8,["modelValue","rules"])]),_:1}),a(n,{md:"3",cols:"12"},{default:d(()=>[a(s,{"prepend-inner-icon":"tabler-map-pin",modelValue:r(l).country,"onUpdate:modelValue":o[7]||(o[7]=i=>r(l).country=i),placeholder:"Country","persistent-placeholder":"",label:"Country",rules:["requiredValidator"in e?e.requiredValidator:r(t)]},null,8,["modelValue","rules"])]),_:1}),a(n,{md:"4",cols:"12"},{default:d(()=>[a(s,{"prepend-inner-icon":"tabler-map-pin",modelValue:r(l).address_1,"onUpdate:modelValue":o[8]||(o[8]=i=>r(l).address_1=i),placeholder:"Address 1","persistent-placeholder":"",label:"Address 1"},null,8,["modelValue"])]),_:1}),a(n,{md:"4",cols:"12"},{default:d(()=>[a(s,{"prepend-inner-icon":"tabler-map-pin",modelValue:r(l).address_2,"onUpdate:modelValue":o[9]||(o[9]=i=>r(l).address_2=i),placeholder:"Address 2","persistent-placeholder":"",label:"Address 2"},null,8,["modelValue"])]),_:1}),a(n,{md:"4",cols:"12"},{default:d(()=>[a(s,{"prepend-inner-icon":"tabler-map-pin",modelValue:r(l).postcode,"onUpdate:modelValue":o[10]||(o[10]=i=>r(l).postcode=i),placeholder:"Post Code","persistent-placeholder":"",label:"Post Code",rules:["requiredValidator"in e?e.requiredValidator:r(t)]},null,8,["modelValue","rules"])]),_:1}),a(n,{cols:"12"},{default:d(()=>[a(J,{type:"submit",disabled:V.value},{default:d(()=>[O(Y(V.value?"Updating...":"Update"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}))]),_:1})}}};export{_e as default};
